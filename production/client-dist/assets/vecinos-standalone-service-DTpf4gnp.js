import{a as r}from"./index-xsH4HHeE.js";const c="vecinos_standalone_user",s="vecinos_standalone_token",g=r.create({baseURL:"/api/vecinos-standalone",headers:{"Content-Type":"application/json"}});g.interceptors.request.use(e=>{const n=localStorage.getItem(s);return n&&(e.headers.Authorization=`Bearer ${n}`),e});const d={login:async(e,n)=>{try{let a=e,i=n;!e&&!n&&(console.log("Usando credenciales predeterminadas de socio de negocio"),a="demopartner",i="password123");const o=await r.post("/api/vecinos/login",{username:a,password:i});return o.data&&o.data.token&&(localStorage.setItem(c,JSON.stringify(o.data.user)),localStorage.setItem(s,o.data.token)),o.data}catch(a){throw console.error("Error en login standalone:",a),a}},logout:()=>{localStorage.removeItem(c),localStorage.removeItem(s)},isAuthenticated:()=>!!localStorage.getItem(s),getCurrentUser:()=>{const e=localStorage.getItem(c);if(e)try{return JSON.parse(e)}catch(n){return console.error("Error al parsear datos de usuario standalone:",n),null}return null},isAdmin:()=>{const e=d.getCurrentUser();return e&&e.role==="admin"},getDocuments:async()=>{try{try{const e=await r.get("/api/document-management/documents/recent");if(e&&e.data&&Array.isArray(e.data))return e.data}catch(e){console.log("Usando datos locales de documentos debido a error en la API:",e)}return[{id:1,title:"Contrato de Arriendo Minimarket",clientName:"Juan Pérez González",status:"pending",createdAt:"2025-05-06T10:15:00Z",type:"contract",verificationCode:"VECX-25-30451",fileType:"pdf"},{id:2,title:"Declaración Jurada Inventario",clientName:"María Rodríguez Silva",status:"completed",createdAt:"2025-05-06T08:30:00Z",type:"declaration",verificationCode:"VECX-25-30452",fileType:"pdf"},{id:3,title:"Poder Simple Representación",clientName:"Carlos López Muñoz",status:"signing",createdAt:"2025-05-05T14:45:00Z",type:"power",verificationCode:"VECX-25-30453",fileType:"pdf"},{id:4,title:"Contrato de Suministro",clientName:"Ana Martínez Contreras",status:"pending",createdAt:"2025-05-05T09:20:00Z",type:"contract",verificationCode:"VECX-25-30454",fileType:"pdf"},{id:5,title:"Autorización Sanitaria",clientName:"Roberto González Díaz",status:"completed",createdAt:"2025-05-04T16:10:00Z",type:"authorization",verificationCode:"VECX-25-30455",fileType:"pdf"},{id:6,title:"Certificado de Negocio Operativo",clientName:"Carmen Soto Vega",status:"completed",createdAt:"2025-05-03T11:05:00Z",type:"certificate",verificationCode:"VECX-25-30456",fileType:"pdf"},{id:7,title:"Acuerdo de Confidencialidad",clientName:"Luis Morales Pinto",status:"signing",createdAt:"2025-05-03T08:15:00Z",type:"agreement",verificationCode:"VECX-25-30457",fileType:"pdf"},{id:8,title:"Contrato de Trabajo Dependiente",clientName:"Javiera Rojas Méndez",status:"completed",createdAt:"2025-05-02T15:30:00Z",type:"contract",verificationCode:"VECX-25-30458",fileType:"pdf"}]}catch(e){return console.error("Error obteniendo documentos:",e),[]}},getTransactions:async()=>{try{try{const e=await r.get("/api/payments/transactions");if(e&&e.data&&Array.isArray(e.data))return e.data}catch(e){console.log("Usando datos locales de transacciones debido a error en la API:",e)}return[{id:101,description:"Certificación de documento notarial",amount:18500,status:"completed",date:"2025-05-06T14:30:00Z",method:"card",reference:"CERT-45691-A"},{id:102,description:"Procesamiento de contrato comercial",amount:25e3,status:"completed",date:"2025-05-06T11:15:00Z",method:"transfer",reference:"CONT-76523-B"},{id:103,description:"Firma de documento legal",amount:12e3,status:"completed",date:"2025-05-05T09:45:00Z",method:"card",reference:"FIRM-29834-C"},{id:104,description:"Verificación de identidad biométrica",amount:8e3,status:"completed",date:"2025-05-04T16:20:00Z",method:"transfer",reference:"VERIF-34127-D"},{id:105,description:"Emisión de certificado de operación",amount:15e3,status:"pending",date:"2025-05-04T10:10:00Z",method:"pending",reference:"CERT-91283-E"},{id:106,description:"Traducción oficial de documento",amount:3e4,status:"pending",date:"2025-05-03T13:40:00Z",method:"pending",reference:"TRAD-58217-F"},{id:107,description:"Legalización de contrato laboral",amount:22e3,status:"completed",date:"2025-05-02T11:55:00Z",method:"card",reference:"LEGAL-67452-G"}]}catch(e){return console.error("Error obteniendo transacciones:",e),[]}},getUserStats:async()=>{try{try{const t=await r.get("/api/user/statistics");if(t&&t.data)return t.data}catch(t){console.log("Usando datos locales de estadísticas debido a error en la API:",t)}const e=await d.getDocuments(),n=await d.getTransactions(),a=e.filter(t=>t.status==="pending").length,i=e.filter(t=>t.status==="completed").length,o=e.filter(t=>t.status==="signing").length,u=new Date,p=new Date(u.getTime()-7*24*60*60*1e3),m=n.filter(t=>new Date(t.date)>=p&&t.status==="completed").reduce((t,l)=>t+l.amount,0);return{documentsCount:e.length,pendingDocuments:a,signingDocuments:o,completedDocuments:i,recentDocuments:e.length,recentEarnings:m,totalTransactions:n.length,pendingTransactions:n.filter(t=>t.status==="pending").length,completedTransactions:n.filter(t=>t.status==="completed").length,certificaciones:e.filter(t=>t.type==="certificate").length,contratos:e.filter(t=>t.type==="contract").length,declaraciones:e.filter(t=>t.type==="declaration").length,verificacionesMensuales:15,firmasDigitales:28}}catch(e){return console.error("Error obteniendo estadísticas de usuario:",e),{documentsCount:8,pendingDocuments:2,signingDocuments:1,completedDocuments:5,recentEarnings:60500}}}};export{d as V};
