import{r,u as ne,j as e,d as O,v as L,x as z,z as M,e as B,V as Q,a as d,ax as Z,ay as D,az as _,aA as ee,bm as he,aB as n,B as u,bl as je,bQ as R,a1 as ce,ag as fe,bN as C,T as pe,g as Ne,h as K,k as X,p as ge,ab as Y,bc as te}from"./index-BPC64rrb.js";import{S as ve}from"./scan-CcSSd7BS.js";const be=({onVerified:$,onCancel:h,userType:a})=>{const[U,S]=r.useState("instructions"),[t,l]=r.useState("instructions"),[c,m]=r.useState(!1),[q,p]=r.useState(null),[N,V]=r.useState(null),[s,j]=r.useState({status:"pending",biometricData:null,nfcData:null,idCardData:null,verificationScore:0,timestamp:new Date().toISOString()}),[F,w]=r.useState(!1),[o,y]=r.useState(!1),[I,H]=r.useState(!1),[v,G]=r.useState(!1),[b,E]=r.useState(0),f=r.useRef(null),W=r.useRef(null),{toast:P}=ne();r.useEffect(()=>()=>{A()},[]),r.useEffect(()=>{let i;return c&&b<100&&(i=setInterval(()=>{E(x=>{const g=x+Math.random()*10;return g>=100?(clearInterval(i),100):g})},500)),()=>{i&&clearInterval(i)}},[c,b]),r.useEffect(()=>{b===100&&c&&t==="processing"&&setTimeout(()=>{xe()},1e3)},[b,c,t]);const ae=async()=>{try{N&&A();const i=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});return V(i),f.current&&(f.current.srcObject=i,await f.current.play(),t==="nfc"&&de()),!0}catch(i){return console.error("Error al iniciar la cámara:",i),p("No se pudo acceder a la cámara. Verifique los permisos del navegador."),l("error"),!1}},A=()=>{N&&(N.getTracks().forEach(i=>i.stop()),V(null)),f.current&&(f.current.srcObject=null)},de=()=>{setTimeout(()=>{t==="nfc"&&(w(!0),P({title:"¡Código QR detectado!",description:"Procesando datos del chip NFC..."}),setTimeout(()=>{y(!0),j(i=>({...i,nfcData:{serialNumber:"CHL123456789",documentNumber:"12.345.678-9",fullName:"NOMBRE APELLIDO USUARIO",birthDate:"01/01/1980",expiryDate:"31/12/2028",issuingAuthority:"REGISTRO CIVIL E IDENTIFICACIÓN",verified:!0}})),P({title:"Datos NFC verificados",description:"La verificación del chip NFC se ha completado correctamente."}),se()},2e3))},3e3)},le=async()=>{m(!0);try{setTimeout(()=>{j(i=>({...i,biometricData:{faceScore:.95,fingerprint:!0,livenessCheck:!0,timestamp:new Date().toISOString()}})),H(!0),m(!1),P({title:"Verificación biométrica completada",description:"95% de coincidencia biométrica detectada."}),l("idcard")},3e3)}catch(i){console.error("Error en verificación biométrica:",i),m(!1),p("No se pudo completar la verificación biométrica."),l("error")}},oe=async()=>{m(!0);try{await ae(),setTimeout(()=>{if(f.current&&W.current){const i=f.current,x=W.current;x.width=i.videoWidth,x.height=i.videoHeight;const g=x.getContext("2d");if(g){g.drawImage(i,0,0,x.width,x.height);const T=x.toDataURL("image/jpeg");j(k=>({...k,idCardData:{documentNumber:"12.345.678-9",fullName:"NOMBRE APELLIDO USUARIO",birthDate:"01/01/1980",nationality:"CHILENA",expiryDate:"31/12/2028",documentType:"CÉDULA DE IDENTIDAD",issueDate:"01/01/2018",address:"SANTIAGO, CHILE",photo:T}})),G(!0),A(),m(!1),P({title:"Cédula verificada",description:"Los datos de la cédula se han extraído correctamente."}),l("nfc")}}},3e3)}catch(i){console.error("Error en verificación de cédula:",i),m(!1),p("No se pudo completar la verificación de la cédula."),l("error")}},me=()=>{l("biometric"),H(!1),G(!1),w(!1),y(!1),E(0),j({status:"pending",biometricData:null,nfcData:null,idCardData:null,verificationScore:0,timestamp:new Date().toISOString()})},se=()=>{l("processing"),m(!0),E(0)},xe=()=>{var ie,re;m(!1),l("result");const i=((ie=s.biometricData)==null?void 0:ie.faceScore)||0,x=(re=s.nfcData)!=null&&re.verified?1:0,g=s.idCardData?1:0,T=(i+x+g)/3,k={...s,status:T>.8?"completed":"failed",verificationScore:T,timestamp:new Date().toISOString()};j(k),$(k)},J=()=>{A(),l("instructions"),m(!1),p(null),E(0),H(!1),G(!1),w(!1),y(!1)},ue=()=>{var i;switch(t){case"instructions":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(pe,{defaultValue:"instructions",onValueChange:S,children:[e.jsxs(Ne,{className:"grid grid-cols-3",children:[e.jsx(K,{value:"instructions",children:"Instrucciones"}),e.jsx(K,{value:"requirements",children:"Requisitos"}),e.jsx(K,{value:"privacy",children:"Privacidad"})]}),e.jsxs(X,{value:"instructions",className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-primary/10 p-4 rounded-full inline-block mb-3",children:e.jsx(R,{className:"h-10 w-10 text-primary"})}),e.jsx("h2",{className:"text-xl font-bold",children:"Verificación Avanzada"}),e.jsx("p",{className:"text-muted-foreground",children:"Este proceso validará su identidad mediante datos biométricos y su cédula de identidad, incluyendo el chip NFC."})]}),e.jsxs("div",{className:"space-y-3 mt-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:e.jsx("span",{className:"text-primary font-bold",children:"1"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Verificación biométrica facial"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Analizaremos sus rasgos faciales para verificar su identidad"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:e.jsx("span",{className:"text-primary font-bold",children:"2"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Escaneo de cédula de identidad"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Capturaremos y verificaremos los datos de su documento"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:e.jsx("span",{className:"text-primary font-bold",children:"3"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Validación de chip NFC"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mediante código QR, validaremos el chip NFC de su cédula"})]})]})]})]}),e.jsx(X,{value:"requirements",className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-bold",children:"Requisitos técnicos:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{children:"Cámara web o cámara de dispositivo móvil"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{children:"Navegador moderno (Chrome, Firefox, Safari)"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{children:"Cédula de identidad chilena vigente"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{children:"Buena iluminación en el ambiente"})]})]})]})}),e.jsx(X,{value:"privacy",className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-bold",children:"Protección de datos:"}),e.jsx("p",{className:"text-sm",children:"Sus datos biométricos y personales serán tratados conforme a la Ley 19.628 sobre Protección de la Vida Privada y utilizados exclusivamente para los fines de verificación de identidad en esta plataforma."}),e.jsx("p",{className:"text-sm",children:"Los datos NFC de su cédula serán verificados pero no almacenados permanentemente. Toda la información es transmitida mediante conexiones seguras cifradas."})]})})]}),e.jsx(d,{onClick:me,className:"w-full",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Iniciando verificación..."]}):e.jsx(e.Fragment,{children:"Comenzar verificación avanzada"})})]});case"biometric":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsx(u,{variant:"outline",className:"mb-2",children:"Paso 1 de 3"}),e.jsx("h2",{className:"text-xl font-bold",children:"Verificación biométrica"}),e.jsx("p",{className:"text-muted-foreground",children:"Realizando análisis biométrico facial"})]}),e.jsx("div",{className:"relative bg-black rounded-lg overflow-hidden h-[300px] flex items-center justify-center",children:c?e.jsxs("div",{className:"text-center text-white",children:[e.jsx(C,{className:"h-12 w-12 animate-spin mx-auto mb-2"}),e.jsx("p",{children:"Analizando rasgos faciales..."})]}):e.jsxs("div",{className:"text-center text-white",children:[e.jsx(R,{className:"h-16 w-16 mx-auto mb-2"}),e.jsx("p",{children:"Presione el botón para iniciar el análisis biométrico"})]})}),e.jsx(d,{onClick:le,className:"w-full",disabled:c||I,children:c?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Procesando..."]}):I?e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"mr-2 h-4 w-4"}),"Verificación biométrica completada"]}):e.jsx(e.Fragment,{children:"Iniciar verificación biométrica"})})]});case"idcard":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsx(u,{variant:"outline",className:"mb-2",children:"Paso 2 de 3"}),e.jsx("h2",{className:"text-xl font-bold",children:"Verificación de cédula"}),e.jsx("p",{className:"text-muted-foreground",children:"Capture el frente de su cédula de identidad"})]}),!c&&!v?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-muted p-4 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(n,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Verificación biométrica completada"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Score de coincidencia: ",(((i=s.biometricData)==null?void 0:i.faceScore)||0)*100,"%"]})]}),e.jsx("div",{className:"relative bg-black rounded-lg overflow-hidden h-[200px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(ce,{className:"h-12 w-12 mx-auto mb-2"}),e.jsx("p",{children:"Presione el botón para escanear su cédula"})]})})]}):v?e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(n,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Cédula verificada correctamente"})]}),s.idCardData&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Número:"}),e.jsx("p",{children:s.idCardData.documentNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Nombre:"}),e.jsx("p",{children:s.idCardData.fullName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Fecha de nacimiento:"}),e.jsx("p",{children:s.idCardData.birthDate})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Vencimiento:"}),e.jsx("p",{children:s.idCardData.expiryDate})]})]})]}):e.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[e.jsx("video",{ref:f,className:"w-full h-[280px] object-cover",autoPlay:!0,playsInline:!0}),e.jsx("div",{className:"absolute inset-0 border-2 border-dashed border-primary/50 pointer-events-none rounded-lg"})]}),e.jsx(d,{onClick:oe,className:"w-full",disabled:c||v,children:c?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Escaneando cédula..."]}):v?e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"mr-2 h-4 w-4"}),"Cédula verificada"]}):e.jsx(e.Fragment,{children:"Escanear cédula"})})]});case"nfc":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsx(u,{variant:"outline",className:"mb-2",children:"Paso 3 de 3"}),e.jsx("h2",{className:"text-xl font-bold",children:"Verificación NFC"}),e.jsx("p",{className:"text-muted-foreground",children:"Escanee el código QR para validar el chip NFC de su cédula"})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(n,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Cédula verificada correctamente"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Procediendo a validar el chip NFC"})]}),F?o?e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(n,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Chip NFC verificado correctamente"})]}),s.nfcData&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Serial NFC:"}),e.jsx("p",{children:s.nfcData.serialNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Nombre:"}),e.jsx("p",{children:s.nfcData.fullName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Documento:"}),e.jsx("p",{children:s.nfcData.documentNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Vencimiento:"}),e.jsx("p",{children:s.nfcData.expiryDate})]})]}),e.jsx(d,{onClick:se,className:"w-full mt-4",children:"Finalizar verificación"})]}):e.jsxs("div",{className:"text-center p-6 space-y-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"animate-pulse flex justify-center",children:e.jsx(C,{className:"h-12 w-12 text-primary animate-spin"})}),e.jsx("h3",{className:"font-medium",children:"Procesando datos NFC"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Por favor, espere mientras verificamos la información del chip NFC..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[e.jsx("video",{ref:f,className:"w-full h-[280px] object-cover",autoPlay:!0,playsInline:!0}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-[200px] h-[200px] border-2 border-primary rounded-lg"})})]}),e.jsx(d,{onClick:ae,className:"w-full",disabled:N!==null,children:N?e.jsx(e.Fragment,{children:"Cámara activa - busque el código QR"}):e.jsx(e.Fragment,{children:"Iniciar cámara para QR"})})]})]});case"processing":return e.jsxs("div",{className:"text-center p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(ve,{className:"h-12 w-12 text-primary"})}),e.jsx("h2",{className:"text-xl font-bold",children:"Procesando verificación completa"}),e.jsx("p",{className:"text-muted-foreground",children:"Estamos integrando y validando toda la información recopilada..."}),e.jsx(je,{value:b,className:"h-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Math.round(b),"% completado"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:`p-3 rounded-lg ${I?"bg-green-50":"bg-muted"}`,children:[e.jsx(R,{className:`h-6 w-6 mx-auto mb-1 ${I?"text-green-500":"text-muted-foreground"}`}),e.jsx("p",{className:"text-xs font-medium",children:"Biometría"})]}),e.jsxs("div",{className:`p-3 rounded-lg ${v?"bg-green-50":"bg-muted"}`,children:[e.jsx(ce,{className:`h-6 w-6 mx-auto mb-1 ${v?"text-green-500":"text-muted-foreground"}`}),e.jsx("p",{className:"text-xs font-medium",children:"Cédula"})]}),e.jsxs("div",{className:`p-3 rounded-lg ${o?"bg-green-50":"bg-muted"}`,children:[e.jsx(fe,{className:`h-6 w-6 mx-auto mb-1 ${o?"text-green-500":"text-muted-foreground"}`}),e.jsx("p",{className:"text-xs font-medium",children:"NFC"})]})]})]});case"result":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[s.status==="completed"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-100 p-4 rounded-full inline-block mb-2",children:e.jsx(n,{className:"h-8 w-8 text-green-500"})}),e.jsx("h2",{className:"text-xl font-bold text-green-700",children:"Verificación Exitosa"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-red-100 p-4 rounded-full inline-block mb-2",children:e.jsx(D,{className:"h-8 w-8 text-red-500"})}),e.jsx("h2",{className:"text-xl font-bold text-red-700",children:"Verificación Fallida"})]}),e.jsxs("p",{className:"text-muted-foreground",children:["Score de verificación: ",Math.round(s.verificationScore*100),"%"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-lg border ${s.biometricData?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:"Verificación biométrica"}),s.biometricData?e.jsx(u,{variant:"outline",className:"bg-green-100 text-green-800",children:"VERIFICADO"}):e.jsx(u,{variant:"outline",className:"bg-red-100 text-red-800",children:"NO VERIFICADO"})]}),s.biometricData&&e.jsxs("p",{className:"text-sm mt-1",children:["Score facial: ",Math.round(s.biometricData.faceScore*100),"%"]})]}),e.jsxs("div",{className:`p-3 rounded-lg border ${s.idCardData?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:"Verificación de cédula"}),s.idCardData?e.jsx(u,{variant:"outline",className:"bg-green-100 text-green-800",children:"VERIFICADO"}):e.jsx(u,{variant:"outline",className:"bg-red-100 text-red-800",children:"NO VERIFICADO"})]}),s.idCardData&&e.jsxs("p",{className:"text-sm mt-1",children:["Documento: ",s.idCardData.documentNumber]})]}),e.jsxs("div",{className:`p-3 rounded-lg border ${s.nfcData?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:"Verificación NFC"}),s.nfcData?e.jsx(u,{variant:"outline",className:"bg-green-100 text-green-800",children:"VERIFICADO"}):e.jsx(u,{variant:"outline",className:"bg-red-100 text-red-800",children:"NO VERIFICADO"})]}),s.nfcData&&e.jsxs("p",{className:"text-sm mt-1",children:["Serial: ",s.nfcData.serialNumber]})]})]})]});case"error":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Z,{variant:"destructive",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx(_,{children:"Error de verificación"}),e.jsx(ee,{children:q||"Se produjo un error durante el proceso de verificación."})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs(d,{variant:"outline",onClick:J,children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Reintentar verificación"]})})]})}};return e.jsxs(O,{className:"w-full",children:[e.jsxs(L,{className:"pb-2",children:[e.jsx(z,{children:"Verificación Avanzada"}),e.jsx(M,{children:"Sistema integrado de verificación biométrica, cédula y NFC"})]}),e.jsxs(B,{children:[ue(),e.jsx("canvas",{ref:W,className:"hidden"})]}),t!=="instructions"&&t!=="processing"&&t!=="error"&&e.jsxs(Q,{className:"border-t pt-4 flex justify-between",children:[t!=="result"?e.jsx(d,{variant:"ghost",onClick:J,children:"Cancelar"}):e.jsx(d,{variant:"outline",onClick:J,children:"Nueva verificación"}),t==="result"&&e.jsx(d,{onClick:()=>h(),children:"Finalizar"})]})]})},ye=()=>{const[$,h]=r.useState("initial"),[a,U]=r.useState(null),[S,t]=r.useState(!1),[l,c]=r.useState(null),[m,q]=ge(),{toast:p}=ne(),N=o=>{U(o),h("complete"),o.status==="completed"?p({title:"Verificación exitosa",description:`Puntuación de verificación: ${Math.round(o.verificationScore*100)}%`}):p({title:"Verificación fallida",description:"No se pudo completar la verificación. Por favor, intente nuevamente.",variant:"destructive"})},V=()=>{h("initial")},s=()=>{if(t(!0),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){c("Su navegador no soporta acceso a la cámara, necesario para la verificación."),h("error"),t(!1);return}if(window.location.protocol!=="https:"&&window.location.hostname!=="localhost"&&!window.location.hostname.includes("replit")){c("La verificación biométrica requiere una conexión segura (HTTPS)."),h("error"),t(!1);return}navigator.mediaDevices.getUserMedia({video:!0}).then(o=>{o.getTracks().forEach(y=>y.stop()),h("biometric"),t(!1)}).catch(o=>{console.error("Error al verificar permisos de cámara:",o),c("No se pudo acceder a la cámara. Por favor, permita el acceso para continuar."),h("error"),t(!1)})},j=()=>{q("/")},F=()=>{h("initial"),U(null),c(null)},w=()=>{switch($){case"initial":return e.jsxs(O,{className:"w-full max-w-md mx-auto",children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-6 w-6 text-primary"}),e.jsx(z,{children:"Verificación Avanzada"})]}),e.jsx(M,{children:"Sistema integrado de validación de identidad con datos biométricos, cédula y NFC"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted",children:[e.jsx(R,{className:"h-12 w-12 mx-auto mb-2 text-primary"}),e.jsx("h2",{className:"text-lg font-medium mb-1",children:"Verificación completa"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Este proceso verificará su identidad mediante tecnología biométrica, validación de cédula y lectura del chip NFC."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:e.jsx(n,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Reconocimiento facial"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Captura y análisis biométrico en tiempo real"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:e.jsx(n,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Validación de cédula"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Captura y verificación de su documento de identidad"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:e.jsx(n,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Verificación de NFC"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lectura del chip NFC mediante código QR"})]})]})]})]}),e.jsxs(Q,{className:"flex-col gap-2",children:[e.jsx(d,{className:"w-full",onClick:s,disabled:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Preparando verificación..."]}):e.jsx(e.Fragment,{children:"Iniciar verificación avanzada"})}),e.jsxs(d,{variant:"outline",className:"w-full",onClick:j,children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Volver"]})]})]});case"biometric":return e.jsx("div",{className:"w-full max-w-xl mx-auto",children:e.jsx(be,{onVerified:N,onCancel:V,userType:"client"})});case"complete":return e.jsxs(O,{className:"w-full max-w-md mx-auto",children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-6 w-6 text-primary"}),e.jsx(z,{children:"Resultado de verificación"})]}),e.jsx(u,{variant:(a==null?void 0:a.status)==="completed"?"outline":"destructive",className:(a==null?void 0:a.status)==="completed"?"bg-green-50 text-green-700":"",children:(a==null?void 0:a.status)==="completed"?"VERIFICADO":"NO VERIFICADO"})]}),e.jsx(M,{children:(a==null?void 0:a.status)==="completed"?"Su identidad ha sido verificada correctamente":"No se pudo completar la verificación de identidad"})]}),e.jsxs(B,{className:"space-y-4",children:[(a==null?void 0:a.status)==="completed"?e.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-50 border border-green-200",children:[e.jsx(n,{className:"h-10 w-10 mx-auto mb-2 text-green-500"}),e.jsx("h2",{className:"text-lg font-medium text-green-700",children:"Verificación exitosa"}),e.jsx("p",{className:"text-sm text-green-600",children:"Se ha verificado correctamente su identidad mediante el sistema integrado."}),e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsxs("p",{className:"font-medium",children:["Puntuación: ",Math.round(((a==null?void 0:a.verificationScore)||0)*100),"%"]}),e.jsxs("p",{className:"text-xs",children:["Tiempo: ",new Date((a==null?void 0:a.timestamp)||"").toLocaleString()]})]})]}):e.jsxs(Z,{variant:"destructive",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx(_,{children:"Verificación fallida"}),e.jsx(ee,{children:"No se pudo completar el proceso de verificación. Por favor, intente nuevamente o contacte al soporte técnico."})]}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Detalles de verificación:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 rounded bg-muted",children:[e.jsx("p",{className:"font-medium",children:"Biometría facial"}),e.jsx("p",{className:a!=null&&a.biometricData?"text-green-600":"text-red-600",children:a!=null&&a.biometricData?"Verificado":"No verificado"})]}),e.jsxs("div",{className:"p-2 rounded bg-muted",children:[e.jsx("p",{className:"font-medium",children:"Cédula de identidad"}),e.jsx("p",{className:a!=null&&a.idCardData?"text-green-600":"text-red-600",children:a!=null&&a.idCardData?"Verificado":"No verificado"})]}),e.jsxs("div",{className:"p-2 rounded bg-muted",children:[e.jsx("p",{className:"font-medium",children:"Chip NFC"}),e.jsx("p",{className:a!=null&&a.nfcData?"text-green-600":"text-red-600",children:a!=null&&a.nfcData?"Verificado":"No verificado"})]}),e.jsxs("div",{className:"p-2 rounded bg-muted",children:[e.jsx("p",{className:"font-medium",children:"Verificación cruzada"}),e.jsx("p",{className:(a==null?void 0:a.verificationScore)>.8?"text-green-600":"text-amber-600",children:(a==null?void 0:a.verificationScore)>.8?"Aprobada":"No aprobada"})]})]})]})]}),e.jsxs(Q,{className:"flex-col gap-2",children:[e.jsxs(d,{variant:"outline",className:"w-full",onClick:F,children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Nueva verificación"]}),e.jsx(d,{className:"w-full",onClick:j,children:"Finalizar"})]})]});case"error":return e.jsxs(O,{className:"w-full max-w-md mx-auto",children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-6 w-6 text-destructive"}),e.jsx(z,{children:"Error de verificación"})]}),e.jsx(M,{children:"No se pudo iniciar el proceso de verificación"})]}),e.jsx(B,{children:e.jsxs(Z,{variant:"destructive",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx(_,{children:"Error"}),e.jsx(ee,{children:l||"Se produjo un error inesperado. Por favor, intente nuevamente."})]})}),e.jsxs(Q,{className:"flex-col gap-2",children:[e.jsx(d,{className:"w-full",onClick:F,children:"Reintentar"}),e.jsxs(d,{variant:"outline",className:"w-full",onClick:j,children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Volver"]})]})]})}};return e.jsx("div",{className:"container py-6 max-w-4xl mx-auto",children:e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh]",children:w()})})};export{ye as default};
