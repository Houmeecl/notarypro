import{o as le,r as f,u as ne,A as ie,Y as te,j as e,d as g,e as b,bc as O,aB as B,U as k,v as ce,x as oe,z as de,a as d,aZ as me,T as xe,g as he,h as N,k as je,a$ as ue,b0 as pe,b1 as A,b2 as u,b3 as ve,b4 as m,bd as fe,be as ge,aD as T,aE as D,aF as E,aG as U,aH as V,I as R,J as r,K as l,N as n,O as i,P as c,Q as t,a2 as q,a3 as H,a4 as M,a5 as $,a6 as x,a7 as L,b5 as G,aI as J,B as h,$ as be,ac as Ne,a0 as p}from"./index-BPC64rrb.js";import{V as we}from"./VecinosAdminLayout-BkUtuhvm.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_=le("user-cog",Ce),v=[{id:1,username:"adminprincipal",fullName:"Administrador Principal",email:"admin@vecinos.test",role:"admin",status:"active",createdAt:"2025-01-01",lastLogin:"2025-05-03"},{id:2,username:"certificador1",fullName:"Carlos Rodríguez",email:"carlos@vecinos.test",role:"certifier",status:"active",createdAt:"2025-01-15",lastLogin:"2025-05-02"},{id:3,username:"certificador2",fullName:"Ana Martínez",email:"ana@vecinos.test",role:"certifier",status:"active",createdAt:"2025-02-10",lastLogin:"2025-05-01"},{id:4,username:"supervisor1",fullName:"Juan Pérez",email:"juan@vecinos.test",role:"supervisor",status:"active",createdAt:"2025-03-01",lastLogin:"2025-04-30"},{id:5,username:"vendedor1",fullName:"María López",email:"maria@vecinos.test",role:"seller",status:"active",createdAt:"2025-03-15",lastLogin:"2025-05-03"},{id:6,username:"vendedor2",fullName:"Luis González",email:"luis@vecinos.test",role:"seller",status:"inactive",createdAt:"2025-04-01",lastLogin:"2025-04-25"}],ye=be({username:p().min(4,{message:"El usuario debe tener al menos 4 caracteres"}),fullName:p().min(3,{message:"El nombre completo es requerido"}),email:p().email({message:"Email inválido"}),password:p().min(6,{message:"La contraseña debe tener al menos 6 caracteres"}).optional(),confirmPassword:p().optional(),role:p().min(1,{message:"Seleccione un rol"}),status:Ne().default(!0)}).refine(o=>!(o.password&&o.confirmPassword&&o.password!==o.confirmPassword),{message:"Las contraseñas no coinciden",path:["confirmPassword"]}),Ae=()=>{const[o,K]=f.useState("all"),[Q,w]=f.useState(!1),[P,C]=f.useState(!1),[j,z]=f.useState(null),[X,y]=f.useState(!1),{toast:S}=ne(),a=ie({resolver:te(ye),defaultValues:{username:"",fullName:"",email:"",password:"",confirmPassword:"",role:"",status:!0}}),F=()=>o==="all"?v:v.filter(s=>s.role===o),Y=s=>{z(s),a.reset({username:s.username,fullName:s.fullName,email:s.email,password:"",confirmPassword:"",role:s.role,status:s.status==="active"}),C(!0)},Z=()=>{a.reset({username:"",fullName:"",email:"",password:"",confirmPassword:"",role:"",status:!0}),w(!0)},W=s=>{z(s),y(!0)},ee=()=>{S({title:"Usuario eliminado",description:`El usuario ${j.username} ha sido eliminado.`,variant:"default"}),y(!1)},I=s=>{P?(S({title:"Usuario actualizado",description:`El usuario ${s.username} ha sido actualizado correctamente.`,variant:"default"}),C(!1)):(S({title:"Usuario creado",description:`El usuario ${s.username} ha sido creado correctamente.`,variant:"default"}),w(!1))},se=s=>{switch(s){case"admin":return e.jsx(h,{className:"bg-purple-500",children:"Administrador"});case"certifier":return e.jsx(h,{className:"bg-blue-500",children:"Certificador"});case"supervisor":return e.jsx(h,{className:"bg-green-500",children:"Supervisor"});case"seller":return e.jsx(h,{className:"bg-amber-500",children:"Vendedor"});default:return e.jsx(h,{className:"bg-gray-500",children:"Desconocido"})}},ae=s=>{switch(s){case"active":return e.jsx(h,{className:"bg-green-500",children:"Activo"});case"inactive":return e.jsx(h,{className:"bg-gray-500",children:"Inactivo"});default:return e.jsx(h,{className:"bg-gray-500",children:"Desconocido"})}},re=s=>{switch(s){case"admin":return e.jsx(O,{className:"h-4 w-4 text-purple-500"});case"certifier":return e.jsx(B,{className:"h-4 w-4 text-blue-500"});case"supervisor":return e.jsx(_,{className:"h-4 w-4 text-green-500"});case"seller":return e.jsx(k,{className:"h-4 w-4 text-amber-500"});default:return e.jsx(k,{className:"h-4 w-4 text-gray-500"})}};return e.jsxs(we,{title:"Gestión de Usuarios",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(g,{children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Administradores"}),e.jsx("p",{className:"text-2xl font-bold",children:v.filter(s=>s.role==="admin").length})]}),e.jsx(O,{className:"h-8 w-8 text-purple-500"})]})})}),e.jsx(g,{children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Certificadores"}),e.jsx("p",{className:"text-2xl font-bold",children:v.filter(s=>s.role==="certifier").length})]}),e.jsx(B,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(g,{children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Supervisores"}),e.jsx("p",{className:"text-2xl font-bold",children:v.filter(s=>s.role==="supervisor").length})]}),e.jsx(_,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(g,{children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Vendedores"}),e.jsx("p",{className:"text-2xl font-bold",children:v.filter(s=>s.role==="seller").length})]}),e.jsx(k,{className:"h-8 w-8 text-amber-500"})]})})})]}),e.jsxs(g,{children:[e.jsx(ce,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(oe,{children:"Usuarios del sistema"}),e.jsx(de,{children:"Administre los usuarios de la plataforma Vecinos Xpress"})]}),e.jsxs(d,{onClick:Z,children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Nuevo Usuario"]})]})}),e.jsx(b,{className:"p-0",children:e.jsxs(xe,{defaultValue:"all",value:o,onValueChange:K,className:"w-full",children:[e.jsx("div",{className:"border-b",children:e.jsxs(he,{className:"bg-transparent -mb-px mx-6",children:[e.jsx(N,{value:"all",className:"data-[state=active]:border-b-2 data-[state=active]:border-amber-500 data-[state=active]:shadow-none rounded-none",children:"Todos"}),e.jsx(N,{value:"admin",className:"data-[state=active]:border-b-2 data-[state=active]:border-amber-500 data-[state=active]:shadow-none rounded-none",children:"Admins"}),e.jsx(N,{value:"certifier",className:"data-[state=active]:border-b-2 data-[state=active]:border-amber-500 data-[state=active]:shadow-none rounded-none",children:"Certificadores"}),e.jsx(N,{value:"supervisor",className:"data-[state=active]:border-b-2 data-[state=active]:border-amber-500 data-[state=active]:shadow-none rounded-none",children:"Supervisores"}),e.jsx(N,{value:"seller",className:"data-[state=active]:border-b-2 data-[state=active]:border-amber-500 data-[state=active]:shadow-none rounded-none",children:"Vendedores"})]})}),e.jsx(je,{value:o,className:"pt-0 pb-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ue,{children:[e.jsx(pe,{children:e.jsxs(A,{children:[e.jsx(u,{children:"Usuario"}),e.jsx(u,{children:"Nombre"}),e.jsx(u,{children:"Email"}),e.jsx(u,{children:"Rol"}),e.jsx(u,{children:"Estado"}),e.jsx(u,{children:"Último acceso"}),e.jsx(u,{className:"text-right",children:"Acciones"})]})}),e.jsxs(ve,{children:[F().map(s=>e.jsxs(A,{children:[e.jsx(m,{className:"font-medium",children:s.username}),e.jsx(m,{children:s.fullName}),e.jsx(m,{children:s.email}),e.jsx(m,{className:"whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[re(s.role),se(s.role)]})}),e.jsx(m,{children:ae(s.status)}),e.jsx(m,{className:"text-sm",children:new Date(s.lastLogin).toLocaleDateString()}),e.jsx(m,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>Y(s),children:e.jsx(fe,{className:"h-4 w-4"})}),s.username!=="adminprincipal"&&e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>W(s),children:e.jsx(ge,{className:"h-4 w-4 text-red-500"})})]})})]},s.id)),F().length===0&&e.jsx(A,{children:e.jsx(m,{colSpan:7,className:"h-32 text-center",children:"No se encontraron usuarios"})})]})]})})})]})})]})]}),e.jsx(T,{open:Q,onOpenChange:w,children:e.jsxs(D,{className:"sm:max-w-[500px]",children:[e.jsxs(E,{children:[e.jsx(U,{children:"Crear nuevo usuario"}),e.jsx(V,{children:"Complete los datos para crear un nuevo usuario en el sistema"})]}),e.jsx(R,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(I),className:"space-y-4",children:[e.jsx(r,{control:a.control,name:"username",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Nombre de usuario"}),e.jsx(i,{children:e.jsx(c,{placeholder:"usuario123",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"fullName",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Nombre completo"}),e.jsx(i,{children:e.jsx(c,{placeholder:"Juan Pérez",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"email",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Email"}),e.jsx(i,{children:e.jsx(c,{placeholder:"correo@ejemplo.com",...s})}),e.jsx(t,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(r,{control:a.control,name:"password",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Contraseña"}),e.jsx(i,{children:e.jsx(c,{type:"password",placeholder:"******",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"confirmPassword",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Confirmar contraseña"}),e.jsx(i,{children:e.jsx(c,{type:"password",placeholder:"******",...s})}),e.jsx(t,{})]})})]}),e.jsx(r,{control:a.control,name:"role",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Rol"}),e.jsxs(q,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(i,{children:e.jsx(H,{children:e.jsx(M,{placeholder:"Seleccione un rol"})})}),e.jsxs($,{children:[e.jsx(x,{value:"admin",children:"Administrador"}),e.jsx(x,{value:"certifier",children:"Certificador"}),e.jsx(x,{value:"supervisor",children:"Supervisor"}),e.jsx(x,{value:"seller",children:"Vendedor"})]})]}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"status",render:({field:s})=>e.jsxs(l,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Usuario activo"}),e.jsx(L,{children:"Activar o desactivar acceso del usuario"})]}),e.jsx(i,{children:e.jsx(G,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(t,{})]})}),e.jsxs(J,{children:[e.jsx(d,{variant:"outline",type:"button",onClick:()=>w(!1),children:"Cancelar"}),e.jsx(d,{type:"submit",children:"Crear usuario"})]})]})})]})}),e.jsx(T,{open:P,onOpenChange:C,children:e.jsxs(D,{className:"sm:max-w-[500px]",children:[e.jsxs(E,{children:[e.jsx(U,{children:"Editar usuario"}),e.jsxs(V,{children:["Modifique los datos del usuario ",j==null?void 0:j.username]})]}),e.jsx(R,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(I),className:"space-y-4",children:[e.jsx(r,{control:a.control,name:"username",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Nombre de usuario"}),e.jsx(i,{children:e.jsx(c,{placeholder:"usuario123",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"fullName",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Nombre completo"}),e.jsx(i,{children:e.jsx(c,{placeholder:"Juan Pérez",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"email",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Email"}),e.jsx(i,{children:e.jsx(c,{placeholder:"correo@ejemplo.com",...s})}),e.jsx(t,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(r,{control:a.control,name:"password",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Nueva contraseña (opcional)"}),e.jsx(i,{children:e.jsx(c,{type:"password",placeholder:"******",...s})}),e.jsx(L,{className:"text-xs",children:"Dejar en blanco para mantener la actual"}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"confirmPassword",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Confirmar contraseña"}),e.jsx(i,{children:e.jsx(c,{type:"password",placeholder:"******",...s})}),e.jsx(t,{})]})})]}),e.jsx(r,{control:a.control,name:"role",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Rol"}),e.jsxs(q,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(i,{children:e.jsx(H,{children:e.jsx(M,{placeholder:"Seleccione un rol"})})}),e.jsxs($,{children:[e.jsx(x,{value:"admin",children:"Administrador"}),e.jsx(x,{value:"certifier",children:"Certificador"}),e.jsx(x,{value:"supervisor",children:"Supervisor"}),e.jsx(x,{value:"seller",children:"Vendedor"})]})]}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"status",render:({field:s})=>e.jsxs(l,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Usuario activo"}),e.jsx(L,{children:"Activar o desactivar acceso del usuario"})]}),e.jsx(i,{children:e.jsx(G,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(t,{})]})}),e.jsxs(J,{children:[e.jsx(d,{variant:"outline",type:"button",onClick:()=>C(!1),children:"Cancelar"}),e.jsx(d,{type:"submit",children:"Guardar cambios"})]})]})})]})}),e.jsx(T,{open:X,onOpenChange:y,children:e.jsxs(D,{className:"sm:max-w-[425px]",children:[e.jsxs(E,{children:[e.jsx(U,{children:"Confirmar eliminación"}),e.jsxs(V,{children:["¿Está seguro que desea eliminar el usuario ",j==null?void 0:j.username,"? Esta acción no se puede deshacer."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(d,{variant:"outline",onClick:()=>y(!1),children:"Cancelar"}),e.jsx(d,{variant:"destructive",onClick:ee,children:"Eliminar"})]})]})})]})};export{Ae as default};
