import{u as N,p as C,bX as y,r as t,j as e,d as S,v as T,x as w,z as I,e as D,N as E,a2 as Q,a3 as q,a4 as P,a5 as R,a6 as i,bM as F,V as G,a as o}from"./index-BPC64rrb.js";function V(){const{toast:s}=N(),[,h]=C(),{user:L}=y(),[c,l]=t.useState(!1),[r,g]=t.useState(""),[a,d]=t.useState(!1),[m,u]=t.useState(""),[j,x]=t.useState(""),p=async v=>{if(v.preventDefault(),!r){s({title:"Error",description:"Por favor selecciona un tipo de documento",variant:"destructive"});return}l(!0);try{const n=Math.random().toString(36).substring(2,15);await new Promise(b=>setTimeout(b,1e3));const f=window.location.origin+"/verificar/"+n;u(f),x(n),d(!0),s({title:"Éxito",description:"Trámite iniciado correctamente"})}catch{s({title:"Error",description:"Ha ocurrido un error al iniciar el trámite",variant:"destructive"})}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:e.jsxs(S,{className:"w-full max-w-md",children:[e.jsxs(T,{className:"bg-indigo-900 text-white rounded-t-lg",children:[e.jsx(w,{className:"text-xl",children:"Iniciar Trámite"}),e.jsx(I,{className:"text-gray-200",children:"Seleccione el tipo de documento para generar un código QR"})]}),e.jsx(D,{className:"pt-6",children:a?e.jsxs("div",{className:"flex flex-col items-center space-y-4 py-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Escanea este código QR con tu móvil:"}),e.jsx("div",{className:"border-2 border-indigo-900 p-4 rounded-lg bg-white",children:e.jsx(F,{value:m,size:200,level:"H",includeMargin:!0})}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ID del trámite:"}),e.jsx("p",{className:"font-mono text-indigo-900 font-bold",children:j})]}),e.jsx("p",{className:"text-sm text-gray-600 text-center max-w-xs",children:"Una vez escaneado, se iniciará el proceso de verificación en tu dispositivo móvil."})]}):e.jsx("form",{onSubmit:p,className:"space-y-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"document-type",children:"Tipo de Documento:"}),e.jsxs(Q,{value:r,onValueChange:g,children:[e.jsx(q,{id:"document-type",className:"w-full",children:e.jsx(P,{placeholder:"Seleccione un tipo de documento"})}),e.jsxs(R,{children:[e.jsx(i,{value:"compraventa",children:"Contrato de Compraventa"}),e.jsx(i,{value:"trabajo",children:"Contrato de Trabajo"}),e.jsx(i,{value:"poder",children:"Poder Bancario"}),e.jsx(i,{value:"mandato",children:"Mandato General"}),e.jsx(i,{value:"finiquito",children:"Finiquito Laboral"})]})]})]})})}),e.jsxs(G,{className:"flex justify-between",children:[e.jsx(o,{variant:"outline",onClick:()=>{a?(d(!1),u(""),x("")):h("/")},children:a?"Iniciar Otro Trámite":"Cancelar"}),!a&&e.jsx(o,{onClick:p,disabled:c||!r,className:"bg-indigo-900 hover:bg-indigo-800",children:c?"Procesando...":"Iniciar Trámite"}),a&&e.jsx(o,{onClick:()=>{s({title:"Compartido",description:"Enlace de verificación copiado al portapapeles"}),navigator.clipboard.writeText(m)},className:"bg-green-600 hover:bg-green-700",children:"Compartir QR"})]})]})})}export{V as default};
