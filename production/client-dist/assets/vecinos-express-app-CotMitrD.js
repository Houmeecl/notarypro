import{u as E,r as n,j as e,B as d,a as t,X as M,M as X,U as v,S as b,L as p,b as r,H as U,C as H,c as I,d as l,e as c,f as y,F as R,T as B,g as O,h as w,i as q,D as C,k as S,l as G,m as Y,n as $}from"./index-BPC64rrb.js";import{V as o}from"./vecinos-standalone-service-DTpf4gnp.js";import{v as x}from"./vecino-xpress-logo-nuevo-B8CWszsf.js";import"./index-xsH4HHeE.js";function _(){const{toast:h}=E(),[T,j]=n.useState(!0),[u,D]=n.useState([]),[N,V]=n.useState([]),[J,L]=n.useState("documents"),[m,z]=n.useState(!1),[a,k]=n.useState(null),[F,P]=n.useState(!1);n.useEffect(()=>{(async()=>{if(o.isAuthenticated())try{const i=o.getCurrentUser();k(i),P(!0),await A()}catch(i){console.error("Error obteniendo datos de usuario:",i),window.location.href="/vecinos-standalone-login"}else window.location.href="/vecinos-standalone-login"})()},[]);const A=async()=>{try{j(!0);const s=await o.getDocuments();D(s);const i=await o.getTransactions();V(i)}catch(s){console.error("Error al cargar datos:",s),h({title:"Error de carga",description:"No se pudieron cargar los datos. Intente nuevamente más tarde.",variant:"destructive"})}finally{j(!1)}},f=()=>{o.logout(),h({title:"Sesión cerrada",description:"Has cerrado sesión correctamente."}),window.location.href="/vecinos-standalone-login"},g=s=>{const i=new Date(s);return new Intl.DateTimeFormat("es-CL",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(i)};return!F||T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:[e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:x,alt:"VecinoXpress Logo",className:"h-28"})}),e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando VecinoXpress..."})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:x,alt:"VecinoXpress Logo",className:"h-20"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{variant:"outline",className:"hidden md:flex",children:"Versión 2.5.3"}),e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>z(!m),className:"md:hidden",children:m?e.jsx(M,{className:"h-6 w-6"}):e.jsx(X,{className:"h-6 w-6"})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[e.jsxs(t,{variant:"ghost",size:"sm",children:[e.jsx(v,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:(a==null?void 0:a.fullName)||(a==null?void 0:a.username)})]}),(a==null?void 0:a.role)==="admin"&&e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>window.location.href="/vecinos-standalone/admin",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Admin"})]}),e.jsx(t,{variant:"ghost",size:"icon",onClick:f,children:e.jsx(p,{className:"h-4 w-4"})})]})]})]})}),m&&e.jsx("div",{className:"md:hidden bg-white border-b shadow-md",children:e.jsx("div",{className:"container mx-auto px-4 py-2",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:(a==null?void 0:a.fullName)||(a==null?void 0:a.username)})]}),e.jsx(d,{children:(a==null?void 0:a.role)==="admin"?"Administrador":"Usuario"})]}),e.jsx(t,{variant:"ghost",className:"justify-start",asChild:!0,children:e.jsxs(r,{href:"/vecinos-standalone",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Inicio"]})}),e.jsx(t,{variant:"ghost",className:"justify-start",asChild:!0,children:e.jsxs(r,{href:"/vecinos-standalone/cuenta",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Mi Cuenta"]})}),e.jsx(t,{variant:"ghost",className:"justify-start",asChild:!0,children:e.jsxs(r,{href:"/vecinos-standalone/soporte",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Soporte"]})}),(a==null?void 0:a.role)==="admin"&&e.jsx(t,{variant:"ghost",className:"justify-start",asChild:!0,children:e.jsxs(r,{href:"/vecinos-standalone/admin",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Panel de Administración"]})}),e.jsxs(t,{variant:"outline",className:"justify-start",onClick:f,children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Cerrar Sesión"]})]})})}),e.jsxs("main",{className:"flex-1 container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Panel de VecinoExpress"}),e.jsx("p",{className:"text-gray-600",children:"Gestiona tus documentos y servicios notariales"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(l,{className:"border-t-4 border-[#2d219b] shadow-md hover:shadow-lg transition-all",children:e.jsxs(c,{className:"p-4 flex flex-col items-center justify-center text-center",children:[e.jsx(y,{className:"h-10 w-10 text-[#2d219b] mb-2"}),e.jsx("h3",{className:"font-medium",children:"Nuevo Documento"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Crea un nuevo documento para firma"}),e.jsx(t,{className:"mt-2 w-full bg-[#2d219b] hover:bg-[#241a7d] text-white",size:"sm",onClick:()=>setLocation("/vecinos-standalone/documento"),children:"Iniciar"})]})}),e.jsx(l,{className:"border-t-4 border-[#4863f7] shadow-md hover:shadow-lg transition-all",children:e.jsxs(c,{className:"p-4 flex flex-col items-center justify-center text-center",children:[e.jsx(R,{className:"h-10 w-10 text-[#4863f7] mb-2"}),e.jsx("h3",{className:"font-medium",children:"Firmar Documento"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Firma un documento pendiente"}),e.jsx(t,{className:"mt-2 w-full border-[#4863f7] text-[#4863f7] hover:bg-[#4863f7] hover:text-white",size:"sm",variant:"outline",children:"Revisar"})]})}),e.jsx("div",{className:"hidden md:block"})]}),e.jsxs(B,{defaultValue:"documents",onValueChange:L,children:[e.jsxs(O,{className:"mb-4 w-full",children:[e.jsxs(w,{value:"documents",className:"flex-1",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Documentos"]}),e.jsxs(w,{value:"transactions",className:"flex-1",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Transacciones"]})]}),e.jsx(S,{value:"documents",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Mis Documentos"}),e.jsxs(t,{variant:"outline",size:"sm",className:"border-[#2d219b] text-[#2d219b] hover:bg-[#2d219b] hover:text-white",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Nuevo"]})]}),u.length>0?e.jsx("div",{className:"space-y-3",children:u.map(s=>e.jsx(l,{className:"border-l-4 border-l-blue-500",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cliente: ",s.clientName]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500 mr-2",children:g(s.createdAt)}),e.jsx(d,{className:s.status==="completed"?"bg-blue-100 text-blue-800":s.status==="signing"?"bg-indigo-100 text-indigo-800":"bg-sky-100 text-sky-800",children:s.status==="completed"?"Completado":s.status==="signing"?"En firma":"Pendiente"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{variant:"outline",size:"sm",className:"border-[#4863f7] text-[#4863f7] hover:bg-[#4863f7] hover:text-white",children:"Ver"}),s.status!=="completed"&&e.jsx(t,{size:"sm",className:"bg-[#2d219b] hover:bg-[#241a7d] text-white",children:s.status==="signing"?"Firmar":"Procesar"})]})]})})},s.id))}):e.jsx(l,{children:e.jsxs(c,{className:"p-8 flex flex-col items-center justify-center text-center",children:[e.jsx(Y,{className:"h-16 w-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"No hay documentos"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Aún no tienes documentos creados o asignados"}),e.jsxs(t,{children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Crear Documento"]})]})})]})}),e.jsx(S,{value:"transactions",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Mis Transacciones"}),e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Ver Tienda"]})]}),N.length>0?e.jsx("div",{className:"space-y-3",children:N.map(s=>e.jsx(l,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.description}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500 mr-2",children:g(s.date)}),e.jsx(d,{className:s.status==="completed"?"bg-blue-100 text-blue-800":"bg-indigo-100 text-indigo-800",children:s.status==="completed"?"Completado":"Pendiente"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-lg",children:["$",s.amount.toLocaleString("es-CL")]}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:s.method==="card"?"Tarjeta":s.method==="transfer"?"Transferencia":"Pendiente"})]})]})})},s.id))}):e.jsx(l,{children:e.jsxs(c,{className:"p-8 flex flex-col items-center justify-center text-center",children:[e.jsx(C,{className:"h-16 w-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"No hay transacciones"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Aún no tienes transacciones registradas"}),e.jsx(t,{variant:"outline",children:"Ver Servicios Disponibles"})]})})]})})]})]}),e.jsx("footer",{className:"bg-white border-t border-gray-200 py-4 mt-auto",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"mb-4 md:mb-0 flex flex-col items-center md:items-start",children:[e.jsx("img",{src:x,alt:"VecinoXpress Logo",className:"h-16 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["© ",new Date().getFullYear()," VecinoXpress - Todos los derechos reservados"]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(r,{href:"/vecinos-standalone/soporte",className:"text-sm text-gray-600 hover:text-blue-600",children:"Soporte"}),e.jsx(r,{href:"/vecinos-standalone/faq",className:"text-sm text-gray-600 hover:text-blue-600",children:"Preguntas Frecuentes"}),e.jsx(r,{href:"/aviso-legal",className:"text-sm text-gray-600 hover:text-blue-600",children:"Términos Legales"})]})]})})})]})}export{_ as default};
