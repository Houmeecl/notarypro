import{o as N,p as w,r as c,A as y,E as S,j as e,d as C,v as k,x as E,z as T,T as I,g as L,h as V,G as F,k as A,e as _,I as P,J as l,K as d,N as m,O as u,P as x,Q as h,a as g,R as q,V as M,W as O,Y as z,Z as i,_ as B,$ as R,a0 as j}from"./index-BPC64rrb.js";import{v as X}from"./vecino-xpress-logo-nuevo-B8CWszsf.js";import{E as D}from"./eye-off-D2wpHTb-.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],H=N("square-check-big",G),J=R({username:j().min(1,"El nombre de usuario es requerido"),password:j().min(1,"La contraseña es requerida")});function Z(){const[K,r]=w(),[t,p]=c.useState(!1),[Q,f]=c.useState("web"),n=y({resolver:z(J),defaultValues:{username:"",password:""}}),o=S({mutationFn:async s=>{console.log("Intentando login con:",s.username);try{const a=await B("POST","/api/vecinos/login",s);if(!a.ok){const v=await a.json();throw new Error(v.message||"Error al iniciar sesión")}return await a.json()}catch(a){throw console.error("Error en petición de login:",a),a}},onSuccess:s=>{var a;console.log("Login exitoso, datos recibidos:",s),s.token&&localStorage.setItem("vecinos_token",s.token),s.user&&localStorage.setItem("vecinos_user",JSON.stringify(s.user)),i({title:"Acceso Autenticado",description:"Bienvenido al Sistema Notarial VecinoXpress"}),s.role==="admin"||((a=s.user)==null?void 0:a.role)==="admin"?r("/vecinos/admin"):r("/vecinos/dashboard")},onError:s=>{if(console.error("Error en autenticación:",s),localStorage.getItem("emergency_mode")==="true"){console.log("Intentando login en modo de emergencia"),localStorage.setItem("vecinos_token","emergency_token"),i({title:"Acceso en Modo de Emergencia",description:"Iniciando sesión con credenciales de emergencia"}),r("/vecinos/dashboard");return}i({title:"Error de Autenticación",description:"Credenciales no válidas o acceso denegado. Verifique sus datos e intente nuevamente.",variant:"destructive"})}}),b=s=>{o.mutate(s)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f2f1ff] p-4",children:e.jsxs(C,{className:"w-full max-w-md shadow-lg",children:[e.jsxs(k,{className:"text-center",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("img",{src:X,alt:"VecinoXpress Logo",className:"h-28 mb-2"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx(E,{className:"text-2xl font-bold text-[#2d219b]",children:"VecinoXpress"})})]}),e.jsx(T,{className:"mt-2",children:"Acceso al Sistema Notarial de Gestión"})]}),e.jsxs(I,{defaultValue:"web",onValueChange:f,children:[e.jsx(L,{className:"grid grid-cols-1 mx-6",children:e.jsxs(V,{value:"web",className:"w-full",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Acceso Notarial"]})}),e.jsx(A,{value:"web",children:e.jsx(_,{children:e.jsx(P,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(b),className:"space-y-4",children:[e.jsx(l,{control:n.control,name:"username",render:({field:s})=>e.jsxs(d,{children:[e.jsx(m,{children:"Usuario"}),e.jsx(u,{children:e.jsx(x,{placeholder:"Tu nombre de usuario",...s,disabled:o.isPending})}),e.jsx(h,{})]})}),e.jsx(l,{control:n.control,name:"password",render:({field:s})=>e.jsxs(d,{children:[e.jsx(m,{children:"Contraseña"}),e.jsx(u,{children:e.jsxs("div",{className:"relative",children:[e.jsx(x,{type:t?"text":"password",placeholder:"Tu contraseña",...s,disabled:o.isPending}),e.jsx(g,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>p(!t),children:t?e.jsx(D,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]})}),e.jsx(h,{})]})}),e.jsx(g,{type:"submit",className:"w-full bg-[#2d219b] hover:bg-[#231c7c]",disabled:o.isPending,children:o.isPending?"Iniciando sesión...":"Iniciar sesión"}),e.jsxs("div",{className:"bg-[#f2f1ff] border border-[#d8d4ff] rounded-md p-3 mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"h-4 w-4 text-[#2d219b] mr-2"}),e.jsx("p",{className:"text-sm text-[#2d219b] font-medium",children:"Aviso de Seguridad"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Este sistema es de uso exclusivo para personal autorizado de la notaría. Cualquier acceso indebido será registrado y podría acarrear consecuencias legales según la Ley 19.799."})]})]})})})})]}),e.jsxs(M,{className:"flex flex-col space-y-2 text-center text-sm",children:[e.jsx("div",{children:e.jsx("button",{type:"button",className:"text-[#2d219b] hover:underline",onClick:()=>r("/vecinos/recuperar-password"),children:"¿Olvidaste tu contraseña?"})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[e.jsx(O,{className:"h-4 w-4 inline-block mr-1"}),"Sistema exclusivo de la Notaría | Versión 2.5.3"]})]})]})})}export{Z as default};
