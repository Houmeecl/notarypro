import{o as nt,bf as Wt,r as B,u as be,j as e,T as it,g as ot,h as Y,ag as ye,k as we,ad as Q,P as je,a2 as O,a3 as H,a4 as K,a5 as $,a6 as P,aP as Ot,a as M,d as q,e as V,s as st,bg as Zt,bh as Ce,aD as me,bi as he,aE as ge,aF as fe,aG as xe,aH as pe,aB as rt,aI as Ht,X as ve,bj as le,m as es,bk as at,bl as Kt,bm as ts,aS as ct,i as J,B as z,bn as ss,bo as ut,V as $t,bp as rs,bq as as,aj as ns,an as is,aR as os,v as Te,x as Ie,z as De,a$ as cs,b0 as ls,b1 as Ae,b2 as te,a9 as mt,br as ds,b3 as us,b4 as Z,as as ms,b8 as hs,b9 as gs,bs as fs,ba as xs,R as ps,bt as js,be as vs,bu as ht,bv as gt}from"./index-BPC64rrb.js";import{V as Ns}from"./VecinosAdminLayout-BkUtuhvm.js";import{S as Be}from"./scan-CcSSd7BS.js";import{L as ys}from"./list-DQJO9LWE.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ft=nt("folder-plus",ws);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],bs=nt("folder-up",Cs);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Es=nt("history",Ss);var ce={},Me,xt;function Rs(){return xt||(xt=1,Me=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Me}var Pe={},se={},pt;function ne(){if(pt)return se;pt=1;let a;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return se.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17},se.getSymbolTotalCodewords=function(s){return n[s]},se.getBCHDigit=function(i){let s=0;for(;i!==0;)s++,i>>>=1;return s},se.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');a=s},se.isKanjiModeEnabled=function(){return typeof a<"u"},se.toSJIS=function(s){return a(s)},se}var Fe={},jt;function lt(){return jt||(jt=1,function(a){a.L={bit:1},a.M={bit:0},a.Q={bit:3},a.H={bit:2};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return a.L;case"m":case"medium":return a.M;case"q":case"quartile":return a.Q;case"h":case"high":return a.H;default:throw new Error("Unknown EC Level: "+i)}}a.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},a.from=function(s,t){if(a.isValid(s))return s;try{return n(s)}catch{return t}}}(Fe)),Fe}var Le,vt;function Ts(){if(vt)return Le;vt=1;function a(){this.buffer=[],this.length=0}return a.prototype={get:function(n){const i=Math.floor(n/8);return(this.buffer[i]>>>7-n%8&1)===1},put:function(n,i){for(let s=0;s<i;s++)this.putBit((n>>>i-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),n&&(this.buffer[i]|=128>>>this.length%8),this.length++}},Le=a,Le}var ke,Nt;function Is(){if(Nt)return ke;Nt=1;function a(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}return a.prototype.set=function(n,i,s,t){const r=n*this.size+i;this.data[r]=s,t&&(this.reservedBit[r]=!0)},a.prototype.get=function(n,i){return this.data[n*this.size+i]},a.prototype.xor=function(n,i,s){this.data[n*this.size+i]^=s},a.prototype.isReserved=function(n,i){return this.reservedBit[n*this.size+i]},ke=a,ke}var qe={},yt;function Ds(){return yt||(yt=1,function(a){const n=ne().getSymbolSize;a.getRowColCoords=function(s){if(s===1)return[];const t=Math.floor(s/7)+2,r=n(s),o=r===145?26:Math.ceil((r-13)/(2*t-2))*2,l=[r-7];for(let c=1;c<t-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},a.getPositions=function(s){const t=[],r=a.getRowColCoords(s),o=r.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||t.push([r[l],r[c]]);return t}}(qe)),qe}var Ve={},wt;function As(){if(wt)return Ve;wt=1;const a=ne().getSymbolSize,n=7;return Ve.getPositions=function(s){const t=a(s);return[[0,0],[t-n,0],[0,t-n]]},Ve}var _e={},Ct;function Bs(){return Ct||(Ct=1,function(a){a.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};a.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},a.from=function(t){return a.isValid(t)?parseInt(t,10):void 0},a.getPenaltyN1=function(t){const r=t.size;let o=0,l=0,c=0,g=null,v=null;for(let x=0;x<r;x++){l=c=0,g=v=null;for(let N=0;N<r;N++){let j=t.get(x,N);j===g?l++:(l>=5&&(o+=n.N1+(l-5)),g=j,l=1),j=t.get(N,x),j===v?c++:(c>=5&&(o+=n.N1+(c-5)),v=j,c=1)}l>=5&&(o+=n.N1+(l-5)),c>=5&&(o+=n.N1+(c-5))}return o},a.getPenaltyN2=function(t){const r=t.size;let o=0;for(let l=0;l<r-1;l++)for(let c=0;c<r-1;c++){const g=t.get(l,c)+t.get(l,c+1)+t.get(l+1,c)+t.get(l+1,c+1);(g===4||g===0)&&o++}return o*n.N2},a.getPenaltyN3=function(t){const r=t.size;let o=0,l=0,c=0;for(let g=0;g<r;g++){l=c=0;for(let v=0;v<r;v++)l=l<<1&2047|t.get(g,v),v>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|t.get(v,g),v>=10&&(c===1488||c===93)&&o++}return o*n.N3},a.getPenaltyN4=function(t){let r=0;const o=t.data.length;for(let c=0;c<o;c++)r+=t.data[c];return Math.abs(Math.ceil(r*100/o/5)-10)*n.N4};function i(s,t,r){switch(s){case a.Patterns.PATTERN000:return(t+r)%2===0;case a.Patterns.PATTERN001:return t%2===0;case a.Patterns.PATTERN010:return r%3===0;case a.Patterns.PATTERN011:return(t+r)%3===0;case a.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2===0;case a.Patterns.PATTERN101:return t*r%2+t*r%3===0;case a.Patterns.PATTERN110:return(t*r%2+t*r%3)%2===0;case a.Patterns.PATTERN111:return(t*r%3+(t+r)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}a.applyMask=function(t,r){const o=r.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)r.isReserved(c,l)||r.xor(c,l,i(t,c,l))},a.getBestMask=function(t,r){const o=Object.keys(a.Patterns).length;let l=0,c=1/0;for(let g=0;g<o;g++){r(g),a.applyMask(g,t);const v=a.getPenaltyN1(t)+a.getPenaltyN2(t)+a.getPenaltyN3(t)+a.getPenaltyN4(t);a.applyMask(g,t),v<c&&(c=v,l=g)}return l}}(_e)),_e}var Ne={},bt;function Gt(){if(bt)return Ne;bt=1;const a=lt(),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Ne.getBlocksCount=function(t,r){switch(r){case a.L:return n[(t-1)*4+0];case a.M:return n[(t-1)*4+1];case a.Q:return n[(t-1)*4+2];case a.H:return n[(t-1)*4+3];default:return}},Ne.getTotalCodewordsCount=function(t,r){switch(r){case a.L:return i[(t-1)*4+0];case a.M:return i[(t-1)*4+1];case a.Q:return i[(t-1)*4+2];case a.H:return i[(t-1)*4+3];default:return}},Ne}var Ue={},ue={},St;function Ms(){if(St)return ue;St=1;const a=new Uint8Array(512),n=new Uint8Array(256);return function(){let s=1;for(let t=0;t<255;t++)a[t]=s,n[s]=t,s<<=1,s&256&&(s^=285);for(let t=255;t<512;t++)a[t]=a[t-255]}(),ue.log=function(s){if(s<1)throw new Error("log("+s+")");return n[s]},ue.exp=function(s){return a[s]},ue.mul=function(s,t){return s===0||t===0?0:a[n[s]+n[t]]},ue}var Et;function Ps(){return Et||(Et=1,function(a){const n=Ms();a.mul=function(s,t){const r=new Uint8Array(s.length+t.length-1);for(let o=0;o<s.length;o++)for(let l=0;l<t.length;l++)r[o+l]^=n.mul(s[o],t[l]);return r},a.mod=function(s,t){let r=new Uint8Array(s);for(;r.length-t.length>=0;){const o=r[0];for(let c=0;c<t.length;c++)r[c]^=n.mul(t[c],o);let l=0;for(;l<r.length&&r[l]===0;)l++;r=r.slice(l)}return r},a.generateECPolynomial=function(s){let t=new Uint8Array([1]);for(let r=0;r<s;r++)t=a.mul(t,new Uint8Array([1,n.exp(r)]));return t}}(Ue)),Ue}var ze,Rt;function Fs(){if(Rt)return ze;Rt=1;const a=Ps();function n(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}return n.prototype.initialize=function(s){this.degree=s,this.genPoly=a.generateECPolynomial(this.degree)},n.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(s.length+this.degree);t.set(s);const r=a.mod(t,this.genPoly),o=this.degree-r.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(r,o),l}return r},ze=n,ze}var Qe={},Oe={},He={},Tt;function Jt(){return Tt||(Tt=1,He.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40}),He}var G={},It;function Yt(){if(It)return G;It=1;const a="[0-9]+",n="[A-Z $%*+\\-./:]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const s="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+`)(?:.|[\r
]))+`;G.KANJI=new RegExp(i,"g"),G.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),G.BYTE=new RegExp(s,"g"),G.NUMERIC=new RegExp(a,"g"),G.ALPHANUMERIC=new RegExp(n,"g");const t=new RegExp("^"+i+"$"),r=new RegExp("^"+a+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return G.testKanji=function(c){return t.test(c)},G.testNumeric=function(c){return r.test(c)},G.testAlphanumeric=function(c){return o.test(c)},G}var Dt;function ie(){return Dt||(Dt=1,function(a){const n=Jt(),i=Yt();a.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},a.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},a.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},a.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},a.MIXED={bit:-1},a.getCharCountIndicator=function(r,o){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!n.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?r.ccBits[0]:o<27?r.ccBits[1]:r.ccBits[2]},a.getBestModeForData=function(r){return i.testNumeric(r)?a.NUMERIC:i.testAlphanumeric(r)?a.ALPHANUMERIC:i.testKanji(r)?a.KANJI:a.BYTE},a.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},a.isValid=function(r){return r&&r.bit&&r.ccBits};function s(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return a.NUMERIC;case"alphanumeric":return a.ALPHANUMERIC;case"kanji":return a.KANJI;case"byte":return a.BYTE;default:throw new Error("Unknown mode: "+t)}}a.from=function(r,o){if(a.isValid(r))return r;try{return s(r)}catch{return o}}}(Oe)),Oe}var At;function Ls(){return At||(At=1,function(a){const n=ne(),i=Gt(),s=lt(),t=ie(),r=Jt(),o=7973,l=n.getBCHDigit(o);function c(N,j,E){for(let p=1;p<=40;p++)if(j<=a.getCapacity(p,E,N))return p}function g(N,j){return t.getCharCountIndicator(N,j)+4}function v(N,j){let E=0;return N.forEach(function(p){const A=g(p.mode,j);E+=A+p.getBitsLength()}),E}function x(N,j){for(let E=1;E<=40;E++)if(v(N,E)<=a.getCapacity(E,j,t.MIXED))return E}a.from=function(j,E){return r.isValid(j)?parseInt(j,10):E},a.getCapacity=function(j,E,p){if(!r.isValid(j))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=t.BYTE);const A=n.getSymbolTotalCodewords(j),C=i.getTotalCodewordsCount(j,E),D=(A-C)*8;if(p===t.MIXED)return D;const R=D-g(p,j);switch(p){case t.NUMERIC:return Math.floor(R/10*3);case t.ALPHANUMERIC:return Math.floor(R/11*2);case t.KANJI:return Math.floor(R/13);case t.BYTE:default:return Math.floor(R/8)}},a.getBestVersionForData=function(j,E){let p;const A=s.from(E,s.M);if(Array.isArray(j)){if(j.length>1)return x(j,A);if(j.length===0)return 1;p=j[0]}else p=j;return c(p.mode,p.getLength(),A)},a.getEncodedBits=function(j){if(!r.isValid(j)||j<7)throw new Error("Invalid QR Code version");let E=j<<12;for(;n.getBCHDigit(E)-l>=0;)E^=o<<n.getBCHDigit(E)-l;return j<<12|E}}(Qe)),Qe}var Ke={},Bt;function ks(){if(Bt)return Ke;Bt=1;const a=ne(),n=1335,i=21522,s=a.getBCHDigit(n);return Ke.getEncodedBits=function(r,o){const l=r.bit<<3|o;let c=l<<10;for(;a.getBCHDigit(c)-s>=0;)c^=n<<a.getBCHDigit(c)-s;return(l<<10|c)^i},Ke}var $e={},Ge,Mt;function qs(){if(Mt)return Ge;Mt=1;const a=ie();function n(i){this.mode=a.NUMERIC,this.data=i.toString()}return n.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(s){let t,r,o;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),o=parseInt(r,10),s.put(o,10);const l=this.data.length-t;l>0&&(r=this.data.substr(t),o=parseInt(r,10),s.put(o,l*3+1))},Ge=n,Ge}var Je,Pt;function Vs(){if(Pt)return Je;Pt=1;const a=ie(),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(s){this.mode=a.ALPHANUMERIC,this.data=s}return i.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let r;for(r=0;r+2<=this.data.length;r+=2){let o=n.indexOf(this.data[r])*45;o+=n.indexOf(this.data[r+1]),t.put(o,11)}this.data.length%2&&t.put(n.indexOf(this.data[r]),6)},Je=i,Je}var Ye,Ft;function _s(){if(Ft)return Ye;Ft=1;const a=ie();function n(i){this.mode=a.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}return n.getBitsLength=function(s){return s*8},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(i){for(let s=0,t=this.data.length;s<t;s++)i.put(this.data[s],8)},Ye=n,Ye}var Xe,Lt;function Us(){if(Lt)return Xe;Lt=1;const a=ie(),n=ne();function i(s){this.mode=a.KANJI,this.data=s}return i.getBitsLength=function(t){return t*13},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(s){let t;for(t=0;t<this.data.length;t++){let r=n.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),s.put(r,13)}},Xe=i,Xe}var We={exports:{}},kt;function zs(){return kt||(kt=1,function(a){var n={single_source_shortest_paths:function(i,s,t){var r={},o={};o[s]=0;var l=n.PriorityQueue.make();l.push(s,0);for(var c,g,v,x,N,j,E,p,A;!l.empty();){c=l.pop(),g=c.value,x=c.cost,N=i[g]||{};for(v in N)N.hasOwnProperty(v)&&(j=N[v],E=x+j,p=o[v],A=typeof o[v]>"u",(A||p>E)&&(o[v]=E,l.push(v,E),r[v]=g))}if(typeof t<"u"&&typeof o[t]>"u"){var C=["Could not find a path from ",s," to ",t,"."].join("");throw new Error(C)}return r},extract_shortest_path_from_predecessor_list:function(i,s){for(var t=[],r=s;r;)t.push(r),i[r],r=i[r];return t.reverse(),t},find_path:function(i,s,t){var r=n.single_source_shortest_paths(i,s,t);return n.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(i){var s=n.PriorityQueue,t={},r;i=i||{};for(r in s)s.hasOwnProperty(r)&&(t[r]=s[r]);return t.queue=[],t.sorter=i.sorter||s.default_sorter,t},default_sorter:function(i,s){return i.cost-s.cost},push:function(i,s){var t={value:i,cost:s};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};a.exports=n}(We)),We.exports}var qt;function Qs(){return qt||(qt=1,function(a){const n=ie(),i=qs(),s=Vs(),t=_s(),r=Us(),o=Yt(),l=ne(),c=zs();function g(C){return unescape(encodeURIComponent(C)).length}function v(C,D,R){const I=[];let F;for(;(F=C.exec(R))!==null;)I.push({data:F[0],index:F.index,mode:D,length:F[0].length});return I}function x(C){const D=v(o.NUMERIC,n.NUMERIC,C),R=v(o.ALPHANUMERIC,n.ALPHANUMERIC,C);let I,F;return l.isKanjiModeEnabled()?(I=v(o.BYTE,n.BYTE,C),F=v(o.KANJI,n.KANJI,C)):(I=v(o.BYTE_KANJI,n.BYTE,C),F=[]),D.concat(R,I,F).sort(function(y,u){return y.index-u.index}).map(function(y){return{data:y.data,mode:y.mode,length:y.length}})}function N(C,D){switch(D){case n.NUMERIC:return i.getBitsLength(C);case n.ALPHANUMERIC:return s.getBitsLength(C);case n.KANJI:return r.getBitsLength(C);case n.BYTE:return t.getBitsLength(C)}}function j(C){return C.reduce(function(D,R){const I=D.length-1>=0?D[D.length-1]:null;return I&&I.mode===R.mode?(D[D.length-1].data+=R.data,D):(D.push(R),D)},[])}function E(C){const D=[];for(let R=0;R<C.length;R++){const I=C[R];switch(I.mode){case n.NUMERIC:D.push([I,{data:I.data,mode:n.ALPHANUMERIC,length:I.length},{data:I.data,mode:n.BYTE,length:I.length}]);break;case n.ALPHANUMERIC:D.push([I,{data:I.data,mode:n.BYTE,length:I.length}]);break;case n.KANJI:D.push([I,{data:I.data,mode:n.BYTE,length:g(I.data)}]);break;case n.BYTE:D.push([{data:I.data,mode:n.BYTE,length:g(I.data)}])}}return D}function p(C,D){const R={},I={start:{}};let F=["start"];for(let m=0;m<C.length;m++){const y=C[m],u=[];for(let h=0;h<y.length;h++){const f=y[h],b=""+m+h;u.push(b),R[b]={node:f,lastCount:0},I[b]={};for(let S=0;S<F.length;S++){const w=F[S];R[w]&&R[w].node.mode===f.mode?(I[w][b]=N(R[w].lastCount+f.length,f.mode)-N(R[w].lastCount,f.mode),R[w].lastCount+=f.length):(R[w]&&(R[w].lastCount=f.length),I[w][b]=N(f.length,f.mode)+4+n.getCharCountIndicator(f.mode,D))}}F=u}for(let m=0;m<F.length;m++)I[F[m]].end=0;return{map:I,table:R}}function A(C,D){let R;const I=n.getBestModeForData(C);if(R=n.from(D,I),R!==n.BYTE&&R.bit<I.bit)throw new Error('"'+C+'" cannot be encoded with mode '+n.toString(R)+`.
 Suggested mode is: `+n.toString(I));switch(R===n.KANJI&&!l.isKanjiModeEnabled()&&(R=n.BYTE),R){case n.NUMERIC:return new i(C);case n.ALPHANUMERIC:return new s(C);case n.KANJI:return new r(C);case n.BYTE:return new t(C)}}a.fromArray=function(D){return D.reduce(function(R,I){return typeof I=="string"?R.push(A(I,null)):I.data&&R.push(A(I.data,I.mode)),R},[])},a.fromString=function(D,R){const I=x(D,l.isKanjiModeEnabled()),F=E(I),m=p(F,R),y=c.find_path(m.map,"start","end"),u=[];for(let h=1;h<y.length-1;h++)u.push(m.table[y[h]].node);return a.fromArray(j(u))},a.rawSplit=function(D){return a.fromArray(x(D,l.isKanjiModeEnabled()))}}($e)),$e}var Vt;function Os(){if(Vt)return Pe;Vt=1;const a=ne(),n=lt(),i=Ts(),s=Is(),t=Ds(),r=As(),o=Bs(),l=Gt(),c=Fs(),g=Ls(),v=ks(),x=ie(),N=Qs();function j(m,y){const u=m.size,h=r.getPositions(y);for(let f=0;f<h.length;f++){const b=h[f][0],S=h[f][1];for(let w=-1;w<=7;w++)if(!(b+w<=-1||u<=b+w))for(let T=-1;T<=7;T++)S+T<=-1||u<=S+T||(w>=0&&w<=6&&(T===0||T===6)||T>=0&&T<=6&&(w===0||w===6)||w>=2&&w<=4&&T>=2&&T<=4?m.set(b+w,S+T,!0,!0):m.set(b+w,S+T,!1,!0))}}function E(m){const y=m.size;for(let u=8;u<y-8;u++){const h=u%2===0;m.set(u,6,h,!0),m.set(6,u,h,!0)}}function p(m,y){const u=t.getPositions(y);for(let h=0;h<u.length;h++){const f=u[h][0],b=u[h][1];for(let S=-2;S<=2;S++)for(let w=-2;w<=2;w++)S===-2||S===2||w===-2||w===2||S===0&&w===0?m.set(f+S,b+w,!0,!0):m.set(f+S,b+w,!1,!0)}}function A(m,y){const u=m.size,h=g.getEncodedBits(y);let f,b,S;for(let w=0;w<18;w++)f=Math.floor(w/3),b=w%3+u-8-3,S=(h>>w&1)===1,m.set(f,b,S,!0),m.set(b,f,S,!0)}function C(m,y,u){const h=m.size,f=v.getEncodedBits(y,u);let b,S;for(b=0;b<15;b++)S=(f>>b&1)===1,b<6?m.set(b,8,S,!0):b<8?m.set(b+1,8,S,!0):m.set(h-15+b,8,S,!0),b<8?m.set(8,h-b-1,S,!0):b<9?m.set(8,15-b-1+1,S,!0):m.set(8,15-b-1,S,!0);m.set(h-8,8,1,!0)}function D(m,y){const u=m.size;let h=-1,f=u-1,b=7,S=0;for(let w=u-1;w>0;w-=2)for(w===6&&w--;;){for(let T=0;T<2;T++)if(!m.isReserved(f,w-T)){let L=!1;S<y.length&&(L=(y[S]>>>b&1)===1),m.set(f,w-T,L),b--,b===-1&&(S++,b=7)}if(f+=h,f<0||u<=f){f-=h,h=-h;break}}}function R(m,y,u){const h=new i;u.forEach(function(T){h.put(T.mode.bit,4),h.put(T.getLength(),x.getCharCountIndicator(T.mode,m)),T.write(h)});const f=a.getSymbolTotalCodewords(m),b=l.getTotalCodewordsCount(m,y),S=(f-b)*8;for(h.getLengthInBits()+4<=S&&h.put(0,4);h.getLengthInBits()%8!==0;)h.putBit(0);const w=(S-h.getLengthInBits())/8;for(let T=0;T<w;T++)h.put(T%2?17:236,8);return I(h,m,y)}function I(m,y,u){const h=a.getSymbolTotalCodewords(y),f=l.getTotalCodewordsCount(y,u),b=h-f,S=l.getBlocksCount(y,u),w=h%S,T=S-w,L=Math.floor(h/S),_=Math.floor(b/S),de=_+1,U=L-_,d=new c(U);let k=0;const re=new Array(S),ee=new Array(S);let ae=0;const Se=new Uint8Array(m.buffer);for(let oe=0;oe<S;oe++){const Re=oe<T?_:de;re[oe]=Se.slice(k,k+Re),ee[oe]=d.encode(re[oe]),k+=Re,ae=Math.max(ae,Re)}const Ee=new Uint8Array(h);let dt=0,X,W;for(X=0;X<ae;X++)for(W=0;W<S;W++)X<re[W].length&&(Ee[dt++]=re[W][X]);for(X=0;X<U;X++)for(W=0;W<S;W++)Ee[dt++]=ee[W][X];return Ee}function F(m,y,u,h){let f;if(Array.isArray(m))f=N.fromArray(m);else if(typeof m=="string"){let L=y;if(!L){const _=N.rawSplit(m);L=g.getBestVersionForData(_,u)}f=N.fromString(m,L||40)}else throw new Error("Invalid data");const b=g.getBestVersionForData(f,u);if(!b)throw new Error("The amount of data is too big to be stored in a QR Code");if(!y)y=b;else if(y<b)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+b+`.
`);const S=R(y,u,f),w=a.getSymbolSize(y),T=new s(w);return j(T,y),E(T),p(T,y),C(T,u,0),y>=7&&A(T,y),D(T,S),isNaN(h)&&(h=o.getBestMask(T,C.bind(null,T,u))),o.applyMask(h,T),C(T,u,h),{modules:T,version:y,errorCorrectionLevel:u,maskPattern:h,segments:f}}return Pe.create=function(y,u){if(typeof y>"u"||y==="")throw new Error("No input text");let h=n.M,f,b;return typeof u<"u"&&(h=n.from(u.errorCorrectionLevel,n.M),f=g.from(u.version),b=o.from(u.maskPattern),u.toSJISFunc&&a.setToSJISFunction(u.toSJISFunc)),F(y,f,h,b)},Pe}var Ze={},et={},_t;function Xt(){return _t||(_t=1,function(a){function n(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let s=i.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+i);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(r){return[r,r]}))),s.length===6&&s.push("F","F");const t=parseInt(s.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+s.slice(0,6).join("")}}a.getOptions=function(s){s||(s={}),s.color||(s.color={});const t=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,r=s.width&&s.width>=21?s.width:void 0,o=s.scale||4;return{width:r,scale:r?4:o,margin:t,color:{dark:n(s.color.dark||"#000000ff"),light:n(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},a.getScale=function(s,t){return t.width&&t.width>=s+t.margin*2?t.width/(s+t.margin*2):t.scale},a.getImageWidth=function(s,t){const r=a.getScale(s,t);return Math.floor((s+t.margin*2)*r)},a.qrToImageData=function(s,t,r){const o=t.modules.size,l=t.modules.data,c=a.getScale(o,r),g=Math.floor((o+r.margin*2)*c),v=r.margin*c,x=[r.color.light,r.color.dark];for(let N=0;N<g;N++)for(let j=0;j<g;j++){let E=(N*g+j)*4,p=r.color.light;if(N>=v&&j>=v&&N<g-v&&j<g-v){const A=Math.floor((N-v)/c),C=Math.floor((j-v)/c);p=x[l[A*o+C]?1:0]}s[E++]=p.r,s[E++]=p.g,s[E++]=p.b,s[E]=p.a}}}(et)),et}var Ut;function Hs(){return Ut||(Ut=1,function(a){const n=Xt();function i(t,r,o){t.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=o,r.width=o,r.style.height=o+"px",r.style.width=o+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}a.render=function(r,o,l){let c=l,g=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(g=s()),c=n.getOptions(c);const v=n.getImageWidth(r.modules.size,c),x=g.getContext("2d"),N=x.createImageData(v,v);return n.qrToImageData(N.data,r,c),i(x,g,v),x.putImageData(N,0,0),g},a.renderToDataURL=function(r,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const g=a.render(r,o,c),v=c.type||"image/png",x=c.rendererOpts||{};return g.toDataURL(v,x.quality)}}(Ze)),Ze}var tt={},zt;function Ks(){if(zt)return tt;zt=1;const a=Xt();function n(t,r){const o=t.a/255,l=r+'="'+t.hex+'"';return o<1?l+" "+r+'-opacity="'+o.toFixed(2).slice(1)+'"':l}function i(t,r,o){let l=t+r;return typeof o<"u"&&(l+=" "+o),l}function s(t,r,o){let l="",c=0,g=!1,v=0;for(let x=0;x<t.length;x++){const N=Math.floor(x%r),j=Math.floor(x/r);!N&&!g&&(g=!0),t[x]?(v++,x>0&&N>0&&t[x-1]||(l+=g?i("M",N+o,.5+j+o):i("m",c,0),c=0,g=!1),N+1<r&&t[x+1]||(l+=i("h",v),v=0)):c++}return l}return tt.render=function(r,o,l){const c=a.getOptions(o),g=r.modules.size,v=r.modules.data,x=g+c.margin*2,N=c.color.light.a?"<path "+n(c.color.light,"fill")+' d="M0 0h'+x+"v"+x+'H0z"/>':"",j="<path "+n(c.color.dark,"stroke")+' d="'+s(v,g,c.margin)+'"/>',E='viewBox="0 0 '+x+" "+x+'"',A='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+E+' shape-rendering="crispEdges">'+N+j+`</svg>
`;return typeof l=="function"&&l(null,A),A},tt}var Qt;function $s(){if(Qt)return ce;Qt=1;const a=Rs(),n=Os(),i=Hs(),s=Ks();function t(r,o,l,c,g){const v=[].slice.call(arguments,1),x=v.length,N=typeof v[x-1]=="function";if(!N&&!a())throw new Error("Callback required as last argument");if(N){if(x<2)throw new Error("Too few arguments provided");x===2?(g=l,l=o,o=c=void 0):x===3&&(o.getContext&&typeof g>"u"?(g=c,c=void 0):(g=c,c=l,l=o,o=void 0))}else{if(x<1)throw new Error("Too few arguments provided");return x===1?(l=o,o=c=void 0):x===2&&!o.getContext&&(c=l,l=o,o=void 0),new Promise(function(j,E){try{const p=n.create(l,c);j(r(p,o,c))}catch(p){E(p)}})}try{const j=n.create(l,c);g(null,r(j,o,c))}catch(j){g(j)}}return ce.create=n.create,ce.toCanvas=t.bind(null,i.render),ce.toDataURL=t.bind(null,i.renderToDataURL),ce.toString=t.bind(null,function(r,o,l){return s.render(r,l)}),ce}var Gs=$s();const Js=Wt(Gs),Ys=({onDocumentImport:a})=>{const[n,i]=B.useState("generate"),[s,t]=B.useState({title:"",type:"contrato",description:"",recipient:"",expiryDate:""}),[r,o]=B.useState(""),[l,c]=B.useState(!1),[g,v]=B.useState(!1),[x,N]=B.useState(null),[j,E]=B.useState(!1),p=B.useRef(null),A=B.useRef(null),{toast:C}=be(),D=async()=>{if(!s.title){C({title:"Título requerido",description:"Por favor ingrese un título para el documento",variant:"destructive"});return}c(!0);try{const u={...s,id:`doc-${Date.now()}`,generatedAt:new Date().toISOString()},h=JSON.stringify(u),f=await Js.toDataURL(h,{width:300,margin:2,color:{dark:"#2d219b",light:"#FFFFFF"}});o(f),C({title:"Código QR generado",description:"El código QR del documento ha sido creado con éxito"})}catch(u){console.error("Error al generar el código QR:",u),C({title:"Error al generar el código QR",description:"Ha ocurrido un error al generar el código QR",variant:"destructive"})}finally{c(!1)}},R=()=>{const u=document.createElement("a");u.href=r,u.download=`qr-documento-${s.title.toLowerCase().replace(/\s+/g,"-")}.png`,document.body.appendChild(u),u.click(),document.body.removeChild(u),C({title:"Código QR descargado",description:"La imagen del código QR ha sido descargada"})},I=async()=>{try{const h=await(await fetch(r)).blob();await navigator.clipboard.write([new ClipboardItem({[h.type]:h})]),C({title:"Código QR copiado",description:"La imagen del código QR ha sido copiada al portapapeles"})}catch(u){console.error("Error al copiar el código QR:",u),C({title:"Error al copiar",description:"No se pudo copiar la imagen al portapapeles",variant:"destructive"})}},F=async()=>{if(!(!p.current||!A.current))try{const u=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});p.current&&(p.current.srcObject=u,p.current.play());const h=setInterval(()=>{if(!A.current||!p.current){clearInterval(h);return}const f=A.current,b=f.getContext("2d");b&&p.current.readyState===p.current.HAVE_ENOUGH_DATA&&(f.height=p.current.videoHeight,f.width=p.current.videoWidth,b.drawImage(p.current,0,0,f.width,f.height),setTimeout(()=>{const S={id:`doc-${Date.now()}`,title:"Contrato de Arriendo Local Comercial",type:"contrato",description:"Contrato estándar para arriendo de local comercial con VecinoXpress",recipient:"Minimarket El Sol",generatedAt:new Date().toISOString(),expiryDate:"2025-12-31"};p.current&&p.current.srcObject&&(p.current.srcObject.getTracks().forEach(L=>L.stop()),p.current.srcObject=null),clearInterval(h),N(S),C({title:"QR escaneado con éxito",description:"Se ha detectado un documento en el código QR"})},3e3))},500);return()=>clearInterval(h)}catch(u){console.error("Error al acceder a la cámara:",u),C({title:"Error de cámara",description:"No se pudo acceder a la cámara del dispositivo",variant:"destructive"})}},m=()=>{p.current&&p.current.srcObject&&(p.current.srcObject.getTracks().forEach(f=>f.stop()),p.current.srcObject=null)},y=()=>{x&&(E(!0),setTimeout(()=>{a&&a(x),C({title:"Documento importado con éxito",description:"El documento ha sido añadido al sistema"}),N(null),v(!1),E(!1)},1500))};return B.useEffect(()=>{g||m()},[g]),e.jsx("div",{children:e.jsxs(it,{defaultValue:"generate",className:"w-full",onValueChange:i,children:[e.jsxs(ot,{className:"grid w-full grid-cols-2",children:[e.jsxs(Y,{value:"generate",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"Generar QR"]}),e.jsxs(Y,{value:"import",className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Escanear QR"]})]}),e.jsx(we,{value:"generate",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"title",children:"Título del documento"}),e.jsx(je,{id:"title",placeholder:"Ingrese el título del documento",value:s.title,onChange:u=>t({...s,title:u.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"type",children:"Tipo de documento"}),e.jsxs(O,{value:s.type,onValueChange:u=>t({...s,type:u}),children:[e.jsx(H,{id:"type",children:e.jsx(K,{placeholder:"Seleccionar tipo"})}),e.jsxs($,{children:[e.jsx(P,{value:"contrato",children:"Contrato"}),e.jsx(P,{value:"certificado",children:"Certificado"}),e.jsx(P,{value:"formulario",children:"Formulario"}),e.jsx(P,{value:"declaracion",children:"Declaración"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"description",children:"Descripción"}),e.jsx(Ot,{id:"description",placeholder:"Ingrese una descripción del documento",value:s.description,onChange:u=>t({...s,description:u.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"recipient",children:"Destinatario"}),e.jsx(je,{id:"recipient",placeholder:"Nombre del destinatario o socio",value:s.recipient,onChange:u=>t({...s,recipient:u.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"expiryDate",children:"Fecha de expiración (opcional)"}),e.jsx(je,{id:"expiryDate",type:"date",value:s.expiryDate,onChange:u=>t({...s,expiryDate:u.target.value})})]}),e.jsx(M,{className:"w-full",onClick:D,disabled:l,children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Generando..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{children:"Generar código QR"})]})})]}),e.jsx(q,{className:"overflow-hidden flex flex-col",children:e.jsx(V,{className:"p-6 flex-grow flex flex-col items-center justify-center",children:r?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4 p-4 bg-white rounded-lg shadow-sm inline-block",children:e.jsx("img",{src:r,alt:"QR Code",className:"max-w-full h-auto",width:250,height:250})}),e.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-4",children:["Código QR para: ",s.title]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:R,children:[e.jsx(st,{className:"h-4 w-4"}),"Descargar"]}),e.jsxs(M,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:I,children:[e.jsx(Zt,{className:"h-4 w-4"}),"Copiar"]})]})]}):e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"w-48 h-48 mx-auto border-2 border-dashed rounded-lg flex items-center justify-center mb-4",children:e.jsx(ye,{className:"h-16 w-16 text-gray-300"})}),e.jsx("p",{className:"text-gray-500",children:"Complete los datos del documento y genere un código QR"})]})})})]})}),e.jsxs(we,{value:"import",className:"space-y-4 mt-4",children:[e.jsx(q,{className:"overflow-hidden",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(Ce,{className:"h-12 w-12 text-[#2d219b] mx-auto"}),e.jsx("h3",{className:"mt-2 text-lg font-medium",children:"Escanear QR de documento"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Escanee un código QR para importar rápidamente los datos del documento"})]}),e.jsxs(me,{open:g,onOpenChange:v,children:[e.jsx(he,{asChild:!0,children:e.jsxs(M,{className:"gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Abrir escáner QR"]})}),e.jsxs(ge,{className:"sm:max-w-md",children:[e.jsxs(fe,{children:[e.jsx(xe,{children:"Escanear código QR"}),e.jsx(pe,{children:"Apunte la cámara hacia un código QR de documento para importarlo"})]}),x?e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(rt,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Documento detectado"}),e.jsx("p",{className:"text-sm text-gray-500",children:"QR escaneado correctamente"})]})]}),e.jsx("div",{className:"space-y-3 mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Título"}),e.jsx("p",{className:"text-sm font-medium",children:x.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tipo"}),e.jsx("p",{className:"text-sm font-medium capitalize",children:x.type})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Descripción"}),e.jsx("p",{className:"text-sm",children:x.description})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Destinatario"}),e.jsx("p",{className:"text-sm",children:x.recipient})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fecha exp."}),e.jsx("p",{className:"text-sm",children:x.expiryDate||"No definida"})]})]})})]}):e.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-lg bg-black",children:[e.jsx("video",{ref:p,className:"h-full w-full object-cover",autoPlay:!0,playsInline:!0,muted:!0,onLoadedMetadata:()=>F()}),e.jsx("canvas",{ref:A,className:"hidden"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"border-2 border-white border-dashed w-3/4 h-3/4 rounded-lg opacity-70"})})]}),e.jsx(Ht,{className:"sm:justify-between",children:x?e.jsxs(e.Fragment,{children:[e.jsxs(M,{type:"button",variant:"outline",onClick:()=>{N(null),F()},className:"gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Escanear otro"]}),e.jsx(M,{type:"button",onClick:y,disabled:j,className:"gap-2",children:j?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Importando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:"Importar documento"})]})})]}):e.jsxs(M,{type:"button",variant:"outline",onClick:()=>v(!1),className:"gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"Cancelar"]})})]})]}),e.jsxs("div",{className:"mt-8 p-5 border border-dashed rounded-lg",children:[e.jsx(es,{className:"h-10 w-10 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"También puede arrastrar y soltar un archivo de código QR aquí"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{htmlFor:"qr-file-input",className:"inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md border border-gray-300 hover:bg-gray-50 cursor-pointer",children:[e.jsx(le,{className:"h-4 w-4"}),"Seleccionar archivo"]}),e.jsx("input",{id:"qr-file-input",type:"file",accept:"image/*",className:"hidden",onChange:()=>{setTimeout(()=>{const u={id:`doc-${Date.now()}`,title:"Certificado de Constitución",type:"certificado",description:"Certificado legal para socio VecinoXpress",recipient:"Farmacia Vida",generatedAt:new Date().toISOString(),expiryDate:"2026-05-31"};N(u),v(!0),C({title:"QR detectado en imagen",description:"Se ha detectado un documento en la imagen"})},1500)}})]})]})]})})}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"¿Cómo funciona?"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Los códigos QR contienen información estructurada sobre los documentos, permitiendo compartir e importar rápidamente datos entre dispositivos. Para mayor seguridad, los documentos importados requerirán validación adicional."})]})]})]})})},Xs=({onImportComplete:a})=>{const[n,i]=B.useState("csv"),[s,t]=B.useState(""),[r,o]=B.useState(""),[l,c]=B.useState("contrato"),[g,v]=B.useState("legal"),[x,N]=B.useState(!1),[j,E]=B.useState(0),[p,A]=B.useState(null),{toast:C}=be(),D=()=>{if(!s.trim()){C({title:"Error",description:"Por favor ingrese datos CSV para procesar",variant:"destructive"});return}N(!0),E(0),A(null);const m=s.trim().split(`
`).filter(U=>U.trim()),y=m[0],u=m.slice(1),h=u.length;if(h===0){C({title:"Error",description:"El CSV no contiene datos a procesar",variant:"destructive"}),N(!1);return}const f=y.split(",").map(U=>U.trim()),S=["title","type","partner"].filter(U=>!f.includes(U));if(S.length>0){C({title:"Error en formato CSV",description:`Faltan columnas requeridas: ${S.join(", ")}`,variant:"destructive"}),N(!1);return}let w=0,T=0,L=0;const _=[],de=setInterval(()=>{if(w>=h){clearInterval(de),N(!1),E(100),A({total:h,successful:T,failed:L,documents:_}),a&&a(_),C({title:"Importación completada",description:`${T} de ${h} documentos importados con éxito`,variant:T===h?"default":"destructive"});return}const d=u[w].split(",").map(ee=>ee.trim()),k={};f.forEach((ee,ae)=>{k[ee]=d[ae]||""}),k.title&&k.type?(T++,_.push({id:Date.now()+w,title:k.title,type:k.type,category:g,status:"draft",createdAt:new Date().toISOString(),partner:k.partner||"No especificado",fileSize:"0 KB",version:"1.0",author:"Sistema",pendingSignatures:0,totalSignatures:0})):L++,w++,E(Math.floor(w/h*100))},200)},R=()=>{if(!r.trim()){C({title:"Error",description:"Por favor ingrese una ruta de carpeta",variant:"destructive"});return}N(!0),E(0),A(null);const m=[{name:"Contrato_Arriendo_001.pdf",size:"1.2 MB",type:"application/pdf"},{name:"Certificado_Autenticidad.docx",size:"580 KB",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"Acuerdo_Nivel_Servicio.pdf",size:"920 KB",type:"application/pdf"},{name:"Solicitud_Ingreso_Socio.doc",size:"760 KB",type:"application/msword"},{name:"Declaracion_Conformidad.pdf",size:"450 KB",type:"application/pdf"}],y=m.length;let u=0;const h=[],f=setInterval(()=>{if(u>=y){clearInterval(f),N(!1),E(100),A({total:y,successful:y,failed:0,documents:h}),a&&a(h),C({title:"Importación de carpeta completada",description:`${y} documentos importados con éxito desde la carpeta`});return}const b=m[u],S=b.name.replace(/\.[^/.]+$/,"").replace(/_/g," ");h.push({id:Date.now()+u,title:S,type:I(b.name),category:g,status:"draft",createdAt:new Date().toISOString(),partner:"Carga desde carpeta",fileSize:b.size,version:"1.0",author:"Sistema",pendingSignatures:0,totalSignatures:0}),u++,E(Math.floor(u/y*100))},500)},I=m=>(m=m.toLowerCase(),m.includes("contrato")||m.includes("acuerdo")?"contrato":m.includes("certificado")||m.includes("autenticidad")?"certificado":m.includes("solicitud")||m.includes("formulario")?"formulario":m.includes("declaracion")?"declaracion":l),F=()=>{A(null),E(0),t(""),o("")};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(it,{defaultValue:"csv",value:n,onValueChange:i,children:[e.jsxs(ot,{className:"grid grid-cols-2",children:[e.jsxs(Y,{value:"csv",className:"flex items-center gap-2",children:[e.jsx(at,{className:"h-4 w-4"}),"Importar desde CSV"]}),e.jsxs(Y,{value:"folder",className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Importar desde carpeta"]})]}),e.jsxs(we,{value:"csv",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"csv-data",children:"Datos CSV"}),e.jsx(Ot,{id:"csv-data",placeholder:`title,type,partner
Contrato de Arriendo,contrato,Minimarket El Sol
Certificado Legal,certificado,Farmacia Vida`,className:"min-h-[150px] font-mono text-sm",value:s,onChange:m=>t(m.target.value),disabled:x}),e.jsx("p",{className:"text-xs text-gray-500",children:"Formato: un documento por línea, con las columnas: title, type, partner (requeridas)"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"doc-type",children:"Tipo de documento por defecto"}),e.jsxs(O,{value:l,onValueChange:c,disabled:x,children:[e.jsx(H,{id:"doc-type",children:e.jsx(K,{placeholder:"Seleccionar tipo"})}),e.jsxs($,{children:[e.jsx(P,{value:"contrato",children:"Contrato"}),e.jsx(P,{value:"certificado",children:"Certificado"}),e.jsx(P,{value:"formulario",children:"Formulario"}),e.jsx(P,{value:"declaracion",children:"Declaración"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se usará si no se especifica en el CSV"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"doc-category",children:"Categoría de documentos"}),e.jsxs(O,{value:g,onValueChange:v,disabled:x,children:[e.jsx(H,{id:"doc-category",children:e.jsx(K,{placeholder:"Seleccionar categoría"})}),e.jsxs($,{children:[e.jsx(P,{value:"legal",children:"Legal"}),e.jsx(P,{value:"comercial",children:"Comercial"}),e.jsx(P,{value:"administrativo",children:"Administrativo"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se aplicará a todos los documentos"})]})]})]}),e.jsxs(we,{value:"folder",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"folder-path",children:"Ruta de la carpeta"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(je,{id:"folder-path",placeholder:"/ruta/a/documentos",value:r,onChange:m=>o(m.target.value),disabled:x}),e.jsx(M,{variant:"outline",type:"button",onClick:()=>o("/documentos/importacion_lote"),disabled:x,children:"Examinar"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se importarán todos los documentos PDF, DOC y DOCX de la carpeta"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"doc-type-folder",children:"Tipo de documento por defecto"}),e.jsxs(O,{value:l,onValueChange:c,disabled:x,children:[e.jsx(H,{id:"doc-type-folder",children:e.jsx(K,{placeholder:"Seleccionar tipo"})}),e.jsxs($,{children:[e.jsx(P,{value:"contrato",children:"Contrato"}),e.jsx(P,{value:"certificado",children:"Certificado"}),e.jsx(P,{value:"formulario",children:"Formulario"}),e.jsx(P,{value:"declaracion",children:"Declaración"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se intentará determinar el tipo según el nombre o se usará este valor"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"doc-category-folder",children:"Categoría de documentos"}),e.jsxs(O,{value:g,onValueChange:v,disabled:x,children:[e.jsx(H,{id:"doc-category-folder",children:e.jsx(K,{placeholder:"Seleccionar categoría"})}),e.jsxs($,{children:[e.jsx(P,{value:"legal",children:"Legal"}),e.jsx(P,{value:"comercial",children:"Comercial"}),e.jsx(P,{value:"administrativo",children:"Administrativo"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se aplicará a todos los documentos de la carpeta"})]})]})]})]}),x&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Procesando documentos..."}),e.jsxs("span",{children:[j,"%"]})]}),e.jsx(Kt,{value:j,className:"h-2"})]}),p&&e.jsx(q,{children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Resultados de la importación"}),e.jsx(M,{variant:"ghost",size:"icon",onClick:F,children:e.jsx(ts,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center",children:[e.jsx(ys,{className:"h-5 w-5 text-gray-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-bold",children:p.total}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total procesados"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg text-center",children:[e.jsx(ct,{className:"h-5 w-5 text-green-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:p.successful}),e.jsx("p",{className:"text-sm text-gray-500",children:"Importados con éxito"})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg text-center",children:[e.jsx(ve,{className:"h-5 w-5 text-red-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:p.failed}),e.jsx("p",{className:"text-sm text-gray-500",children:"Fallidos"})]})]}),p.documents.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Documentos importados:"}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto border rounded-md p-2",children:e.jsx("ul",{className:"space-y-2",children:p.documents.map((m,y)=>e.jsxs("li",{className:"text-sm flex justify-between items-center border-b pb-2 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-[#2d219b]"}),e.jsx("span",{children:m.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:"outline",className:"capitalize",children:m.type}),e.jsx(z,{variant:"secondary",children:"Borrador"})]})]},y))})})]})]})})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(M,{variant:"outline",type:"button",disabled:x,onClick:F,children:"Cancelar"}),e.jsx(M,{type:"button",disabled:x||n==="csv"&&!s.trim()||n==="folder"&&!r.trim(),onClick:n==="csv"?D:R,children:x?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full"}),e.jsx("span",{children:"Procesando..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:"Importar documentos"})]})})]})]})},Ws=({onCapture:a,onCancel:n,aspectRatio:i="4/3",maxWidth:s=640,captureLabel:t="Capturar"})=>{const r=B.useRef(null),o=B.useRef(null),{toast:l}=be(),[c,g]=B.useState(null),[v,x]=B.useState(null),[N,j]=B.useState(null),[E,p]=B.useState(!1),[A,C]=B.useState(!0),D=async()=>{try{const h={video:{facingMode:A?"user":"environment",width:{ideal:s},aspectRatio:parseFloat(i.replace("/","/"))},audio:!1};c&&R();const f=await navigator.mediaDevices.getUserMedia(h);g(f),x(!0),p(!0),r.current&&(r.current.srcObject=f,r.current.play()),l({title:"Cámara activada",description:"La cámara se ha iniciado correctamente",duration:3e3})}catch(h){console.error("Error accessing camera:",h),x(!1),p(!1),l({title:"Error al acceder a la cámara",description:"Por favor, asegúrese de que la aplicación tiene permiso para usar la cámara",variant:"destructive",duration:5e3})}},R=()=>{c&&(c.getTracks().forEach(h=>h.stop()),g(null),p(!1))},I=()=>{C(!A)},F=()=>{if(r.current&&o.current){const h=r.current,f=o.current;f.width=h.videoWidth,f.height=h.videoHeight;const b=f.getContext("2d");if(b){A&&(b.translate(f.width,0),b.scale(-1,1)),b.drawImage(h,0,0,f.width,f.height);const S=f.toDataURL("image/jpeg");j(S),l({title:"Imagen capturada",description:"La imagen se ha capturado correctamente",duration:3e3})}}},m=()=>{N&&(a(N),R())},y=()=>{j(null)};B.useEffect(()=>(D(),()=>{R()}),[A]);const u={aspectRatio:i,maxWidth:`${s}px`,margin:"0 auto"};return e.jsxs(q,{children:[e.jsx(V,{className:"p-4",children:N?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Previsualización"}),e.jsx(M,{variant:"ghost",size:"icon",onClick:n,title:"Cerrar",children:e.jsx(ve,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"bg-gray-100 rounded-md overflow-hidden",style:u,children:e.jsx("img",{src:N,alt:"Captured",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsxs(M,{variant:"outline",onClick:y,title:"Reintentar captura",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Reintentar"]}),e.jsxs(M,{onClick:m,title:"Aceptar imagen",children:[e.jsx(ct,{className:"h-4 w-4 mr-2"}),"Aceptar"]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Captura de foto"}),e.jsx(M,{variant:"ghost",size:"icon",onClick:n,title:"Cerrar cámara",children:e.jsx(ve,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"bg-gray-100 rounded-md overflow-hidden relative",style:u,children:E?e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:r,className:"w-full h-full object-cover",autoPlay:!0,playsInline:!0,muted:!0,style:{transform:A?"scaleX(-1)":"none"}}),e.jsx("div",{className:"absolute inset-0 border-2 border-dashed border-blue-400 pointer-events-none opacity-60"})]}):e.jsx("div",{className:"flex items-center justify-center w-full h-full min-h-[240px]",children:v===!1?e.jsxs("div",{className:"text-center px-4 py-8",children:[e.jsx(ss,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"No se pudo acceder a la cámara"}),e.jsx(M,{onClick:D,children:"Reintentar"})]}):e.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[e.jsx(Ce,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Iniciando cámara..."})]})})}),e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsxs(M,{variant:"outline",onClick:I,disabled:!E,title:"Cambiar cámara",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Cambiar cámara"]}),e.jsxs(M,{onClick:F,disabled:!E,title:t,children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),t]})]})]})}),e.jsx($t,{className:"px-4 py-3 bg-gray-50 text-xs text-gray-500",children:e.jsxs("div",{className:"w-full text-center",children:[A?"Usando cámara frontal":"Usando cámara trasera"," • La imagen se utilizará para el documento seleccionado"]})}),e.jsx("canvas",{ref:o,style:{display:"none"}})]})},rr=()=>{const{isFunctionalMode:a}=rs(!0),{toast:n}=be(),[i,s]=B.useState(""),[t,r]=B.useState("all"),[o,l]=B.useState("all"),[c,g]=B.useState("all"),[v,x]=B.useState("all"),[N,j]=B.useState(!1),[E,p]=B.useState(!1),[A,C]=B.useState(!1),[D,R]=B.useState(!1),[I,F]=B.useState(null),[m,y]=B.useState([]);B.useEffect(()=>{a&&(console.log("✅ Gestor documental cargado en modo funcional real"),n({title:"Gestor Documental Activo",description:"El sistema de gestión documental se ha cargado en modo funcional real",duration:3e3}))},[a,n]);const u=[{id:1,title:"Contrato de Arriendo Local Comercial",type:"contrato",category:"legal",status:"signed",createdAt:"2025-04-28T14:30:00",partner:"Minimarket El Sol",fileSize:"1.2 MB",version:"1.0",author:"Carlos Mendoza",pendingSignatures:0,totalSignatures:2},{id:2,title:"Solicitud de Ingreso Socio VecinoXpress",type:"formulario",category:"administrativo",status:"pending",createdAt:"2025-05-01T09:45:00",partner:"Farmacia Vida",fileSize:"850 KB",version:"1.0",author:"Ana Silva",pendingSignatures:1,totalSignatures:2},{id:3,title:"Certificado de Constitución",type:"certificado",category:"legal",status:"validated",createdAt:"2025-04-20T11:15:00",partner:"Minimarket El Sol",fileSize:"1.5 MB",version:"1.0",author:"Juan Carrasco",pendingSignatures:0,totalSignatures:1},{id:4,title:"Contrato de Servicios VecinoXpress",type:"contrato",category:"comercial",status:"draft",createdAt:"2025-05-02T16:20:00",partner:"Librería Central",fileSize:"920 KB",version:"0.9",author:"Carlos Mendoza",pendingSignatures:0,totalSignatures:0},{id:5,title:"Declaración de Cumplimiento Normativo",type:"declaracion",category:"legal",status:"signed",createdAt:"2025-04-15T10:30:00",partner:"Farmacia Vida",fileSize:"750 KB",version:"1.0",author:"Ana Silva",pendingSignatures:0,totalSignatures:1},{id:6,title:"Acuerdo de Nivel de Servicio",type:"contrato",category:"comercial",status:"rejected",createdAt:"2025-04-25T13:40:00",partner:"Café Internet Speed",fileSize:"980 KB",version:"1.1",author:"Juan Carrasco",pendingSignatures:0,totalSignatures:2},{id:7,title:"Certificado de Autenticidad Firma",type:"certificado",category:"legal",status:"validated",createdAt:"2025-05-03T09:15:00",partner:"Ferretería Construmax",fileSize:"450 KB",version:"1.0",author:"Carlos Mendoza",pendingSignatures:0,totalSignatures:1}],h=[{id:"legal",name:"Legal",count:4},{id:"comercial",name:"Comercial",count:2},{id:"administrativo",name:"Administrativo",count:1}],f=[{id:"contrato",name:"Contrato",count:3},{id:"certificado",name:"Certificado",count:2},{id:"formulario",name:"Formulario",count:1},{id:"declaracion",name:"Declaración",count:1}],b=[{id:"minimarket-el-sol",name:"Minimarket El Sol",count:2},{id:"farmacia-vida",name:"Farmacia Vida",count:2},{id:"libreria-central",name:"Librería Central",count:1},{id:"cafe-internet-speed",name:"Café Internet Speed",count:1},{id:"ferreteria-construmax",name:"Ferretería Construmax",count:1}],S=[{id:1,type:"upload",document:"Contrato de Arriendo Local Comercial",user:"Carlos Mendoza",date:"2025-05-03T14:30:00"},{id:2,type:"sign",document:"Certificado de Autenticidad Firma",user:"Juan Carrasco",date:"2025-05-03T11:45:00"},{id:3,type:"validate",document:"Certificado de Constitución",user:"Ana Silva",date:"2025-05-02T16:20:00"},{id:4,type:"reject",document:"Acuerdo de Nivel de Servicio",user:"Carlos Mendoza",date:"2025-05-01T09:10:00"},{id:5,type:"comment",document:"Solicitud de Ingreso Socio VecinoXpress",user:"Ana Silva",date:"2025-04-30T13:55:00"}],w={total:7,signed:2,pending:1,thisMonth:5,lastMonth:2,signatureRate:85},T=u.filter(d=>{const k=t==="all"||d.status===t,re=o==="all"||d.category===o,ee=c==="all"||d.type===c,ae=v==="all"||d.partner===v,Se=d.title.toLowerCase().includes(i.toLowerCase())||d.partner.toLowerCase().includes(i.toLowerCase());return k&&re&&ee&&ae&&Se}),L=d=>{switch(d){case"draft":return e.jsx(z,{variant:"outline",children:"Borrador"});case"pending":return e.jsx(z,{variant:"secondary",className:"bg-amber-100 text-amber-800 hover:bg-amber-100",children:"Pendiente"});case"validated":return e.jsx(z,{className:"bg-blue-500 hover:bg-blue-600 text-white",children:"Validado"});case"signed":return e.jsx(z,{className:"bg-green-500 hover:bg-green-600 text-white",children:"Firmado"});case"rejected":return e.jsx(z,{variant:"destructive",children:"Rechazado"});default:return e.jsx(z,{variant:"outline",children:d})}},_=d=>ht(new Date(d),"d 'de' MMMM, yyyy",{locale:gt}),de=d=>{m.includes(d)?y(m.filter(k=>k!==d)):y([...m,d])},U=()=>{m.length===T.length?y([]):y(T.map(d=>d.id))};return e.jsxs(Ns,{title:"Gestor Documental",children:[e.jsx(as,{className:"mb-4"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(q,{className:"border-0 shadow-md",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total documentos"}),e.jsx("h3",{className:"text-2xl font-bold mt-1 text-[#2d219b]",children:w.total}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"En plataforma"})]}),e.jsx("div",{className:"p-2 bg-[#2d219b] bg-opacity-10 rounded-full",children:e.jsx(J,{className:"h-5 w-5 text-[#2d219b]"})})]})})}),e.jsx(q,{className:"border-0 shadow-md",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Documentos firmados"}),e.jsx("h3",{className:"text-2xl font-bold mt-1 text-[#2d219b]",children:w.signed}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["De ",w.total," documentos"]})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(rt,{className:"h-5 w-5 text-green-600"})})]})})}),e.jsx(q,{className:"border-0 shadow-md",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pendientes de firma"}),e.jsx("h3",{className:"text-2xl font-bold mt-1 text-[#2d219b]",children:w.pending}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Requieren acción"})]}),e.jsx("div",{className:"p-2 bg-amber-100 rounded-full",children:e.jsx(ns,{className:"h-5 w-5 text-amber-600"})})]})})}),e.jsx(q,{className:"border-0 shadow-md",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Este mes"}),e.jsx("h3",{className:"text-2xl font-bold mt-1 text-[#2d219b]",children:w.thisMonth}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",w.thisMonth-w.lastMonth," que mes pasado"]})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(is,{className:"h-5 w-5 text-blue-600"})})]})})}),e.jsx(q,{className:"border-0 shadow-md",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tasa de firmas"}),e.jsx("div",{className:"p-2 bg-[#2d219b] bg-opacity-10 rounded-full",children:e.jsx(J,{className:"h-5 w-5 text-[#2d219b]"})})]}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("span",{className:"text-2xl font-bold text-[#2d219b]",children:[w.signatureRate,"%"]}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"+5% vs mes anterior"})]}),e.jsx(Kt,{value:w.signatureRate,className:"h-2"})]})]})})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(me,{open:D,onOpenChange:R,children:[e.jsx(he,{asChild:!0,children:e.jsxs(M,{className:"gap-2 bg-[#2d219b] hover:bg-[#241a7d] text-white",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Capturar con cámara"]})}),e.jsxs(ge,{className:"sm:max-w-lg",children:[e.jsxs(fe,{children:[e.jsx(xe,{children:"Capturar documento con cámara"}),e.jsx(pe,{children:"Utilice la cámara para capturar documentos o identificaciones."})]}),D&&e.jsx(Ws,{onCapture:d=>{F(d),n({title:"Imagen capturada",description:"Documento capturado correctamente con la cámara"}),R(!1),console.log("Imagen capturada:",d.substring(0,50)+"...")},onCancel:()=>R(!1),captureLabel:"Capturar documento"})]})]}),e.jsxs(me,{open:N,onOpenChange:j,children:[e.jsx(he,{asChild:!0,children:e.jsxs(M,{className:"gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),"Subir documento"]})}),e.jsxs(ge,{children:[e.jsxs(fe,{children:[e.jsx(xe,{children:"Subir nuevo documento"}),e.jsx(pe,{children:"Cargue un documento para añadirlo al sistema. Se admiten archivos PDF, DOC, DOCX."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[e.jsx(le,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"Arrastre archivos aquí o haga clic para buscar"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Máximo 10MB por archivo"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",htmlFor:"docType",children:"Tipo de documento"}),e.jsxs(O,{defaultValue:"contrato",children:[e.jsx(H,{id:"docType",children:e.jsx(K,{placeholder:"Seleccionar tipo"})}),e.jsxs($,{children:[e.jsx(P,{value:"contrato",children:"Contrato"}),e.jsx(P,{value:"certificado",children:"Certificado"}),e.jsx(P,{value:"formulario",children:"Formulario"}),e.jsx(P,{value:"declaracion",children:"Declaración"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",htmlFor:"docCategory",children:"Categoría"}),e.jsxs(O,{defaultValue:"legal",children:[e.jsx(H,{id:"docCategory",children:e.jsx(K,{placeholder:"Seleccionar categoría"})}),e.jsxs($,{children:[e.jsx(P,{value:"legal",children:"Legal"}),e.jsx(P,{value:"comercial",children:"Comercial"}),e.jsx(P,{value:"administrativo",children:"Administrativo"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",htmlFor:"docPartner",children:"Socio relacionado"}),e.jsxs(O,{children:[e.jsx(H,{id:"docPartner",children:e.jsx(K,{placeholder:"Seleccionar socio (opcional)"})}),e.jsx($,{children:b.map(d=>e.jsx(P,{value:d.id,children:d.name},d.id))})]})]})]}),e.jsxs(Ht,{children:[e.jsx(M,{variant:"outline",onClick:()=>j(!1),children:"Cancelar"}),e.jsx(M,{type:"submit",children:"Subir documento"})]})]})]}),e.jsxs(me,{open:E,onOpenChange:p,children:[e.jsx(he,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"Códigos QR"]})}),e.jsxs(ge,{className:"max-w-3xl",children:[e.jsxs(fe,{children:[e.jsx(xe,{children:"Generador de códigos QR para documentos"}),e.jsx(pe,{children:"Genere códigos QR para compartir documentos o escanee documentos desde códigos QR"})]}),e.jsx(Ys,{onDocumentImport:d=>{console.log("Documento importado:",d),p(!1)}})]})]}),e.jsxs(me,{open:A,onOpenChange:C,children:[e.jsx(he,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"gap-2",children:[e.jsx(at,{className:"h-4 w-4"}),"Importar Lote"]})}),e.jsxs(ge,{className:"max-w-3xl",children:[e.jsxs(fe,{children:[e.jsx(xe,{children:"Importación Masiva de Documentos"}),e.jsx(pe,{children:"Importe múltiples documentos desde un archivo CSV o carpeta"})]}),e.jsx(Xs,{onImportComplete:d=>{console.log("Documentos importados:",d),C(!1)}})]})]}),e.jsxs(M,{variant:"outline",className:"gap-2",children:[e.jsx(ft,{className:"h-4 w-4"}),"Nueva categoría"]}),m.length>0&&e.jsxs(M,{variant:"secondary",className:"gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Descargar (",m.length,")"]})]}),e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(je,{placeholder:"Buscar por título o socio...",className:"pl-10",value:i,onChange:d=>s(d.target.value)})]})]}),e.jsxs(q,{className:"border-0 shadow-md",children:[e.jsxs(Te,{className:"pb-0",children:[e.jsx(Ie,{children:"Documentos"}),e.jsx(De,{children:"Gestión centralizada de todos los documentos en la plataforma"})]}),e.jsxs(V,{className:"pt-6",children:[e.jsx(it,{value:t,onValueChange:r,className:"mb-6",children:e.jsxs(ot,{className:"grid grid-cols-6",children:[e.jsxs(Y,{value:"all",className:"text-sm",children:["Todos (",u.length,")"]}),e.jsxs(Y,{value:"signed",className:"text-sm",children:["Firmados (",u.filter(d=>d.status==="signed").length,")"]}),e.jsxs(Y,{value:"pending",className:"text-sm",children:["Pendientes (",u.filter(d=>d.status==="pending").length,")"]}),e.jsxs(Y,{value:"validated",className:"text-sm",children:["Validados (",u.filter(d=>d.status==="validated").length,")"]}),e.jsxs(Y,{value:"draft",className:"text-sm",children:["Borradores (",u.filter(d=>d.status==="draft").length,")"]}),e.jsxs(Y,{value:"rejected",className:"text-sm",children:["Rechazados (",u.filter(d=>d.status==="rejected").length,")"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(O,{value:o,onValueChange:l,children:[e.jsx(H,{children:e.jsx(K,{placeholder:"Filtrar por categoría"})}),e.jsxs($,{children:[e.jsx(P,{value:"all",children:"Todas las categorías"}),h.map(d=>e.jsxs(P,{value:d.id,children:[d.name," (",d.count,")"]},d.id))]})]}),e.jsxs(O,{value:c,onValueChange:g,children:[e.jsx(H,{children:e.jsx(K,{placeholder:"Filtrar por tipo"})}),e.jsxs($,{children:[e.jsx(P,{value:"all",children:"Todos los tipos"}),f.map(d=>e.jsxs(P,{value:d.id,children:[d.name," (",d.count,")"]},d.id))]})]}),e.jsxs(O,{value:v,onValueChange:x,children:[e.jsx(H,{children:e.jsx(K,{placeholder:"Filtrar por socio"})}),e.jsxs($,{children:[e.jsx(P,{value:"all",children:"Todos los socios"}),b.map(d=>e.jsxs(P,{value:d.id,children:[d.name," (",d.count,")"]},d.id))]})]})]}),e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsxs(cs,{children:[e.jsx(ls,{children:e.jsxs(Ae,{children:[e.jsx(te,{className:"w-12",children:e.jsx(mt,{checked:m.length===T.length&&T.length>0,onCheckedChange:U,"aria-label":"Seleccionar todos"})}),e.jsx(te,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Documento"}),e.jsx(ds,{className:"h-3 w-3"})]})}),e.jsx(te,{children:"Socio"}),e.jsx(te,{children:"Estado"}),e.jsx(te,{children:"Tipo"}),e.jsx(te,{children:"Fecha"}),e.jsx(te,{children:"Tamaño"}),e.jsx(te,{})]})}),e.jsx(us,{children:T.length===0?e.jsx(Ae,{children:e.jsxs(Z,{colSpan:8,className:"text-center py-10",children:[e.jsx(J,{className:"h-10 w-10 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 font-medium mb-1",children:"No se encontraron documentos"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Intente con otros criterios de búsqueda"})]})}):T.map(d=>e.jsxs(Ae,{children:[e.jsx(Z,{children:e.jsx(mt,{checked:m.includes(d.id),onCheckedChange:()=>de(d.id),"aria-label":`Seleccionar ${d.title}`})}),e.jsx(Z,{children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-[#2d219b]/10 rounded",children:e.jsx(J,{className:"h-4 w-4 text-[#2d219b]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Versión ",d.version," • ",d.author]})]})]})}),e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:d.partner})]})}),e.jsx(Z,{children:L(d.status)}),e.jsx(Z,{children:e.jsx(z,{variant:"outline",className:"capitalize",children:d.type})}),e.jsx(Z,{children:e.jsx("div",{className:"text-sm",children:_(d.createdAt)})}),e.jsx(Z,{children:e.jsx("div",{className:"text-sm text-gray-500",children:d.fileSize})}),e.jsx(Z,{children:e.jsxs(hs,{children:[e.jsx(gs,{asChild:!0,children:e.jsx(M,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(fs,{className:"h-4 w-4"})})}),e.jsx(xs,{className:"w-56",align:"end",children:e.jsxs("div",{className:"grid gap-1",children:[e.jsxs(M,{variant:"ghost",className:"justify-start gap-2 text-sm",children:[e.jsx(ps,{className:"h-4 w-4"}),"Ver documento"]}),e.jsxs(M,{variant:"ghost",className:"justify-start gap-2 text-sm",children:[e.jsx(st,{className:"h-4 w-4"}),"Descargar"]}),e.jsxs(M,{variant:"ghost",className:"justify-start gap-2 text-sm",children:[e.jsx(js,{className:"h-4 w-4"}),"Editar detalles"]}),e.jsxs(M,{variant:"ghost",className:"justify-start gap-2 text-sm text-red-600 hover:text-red-600 hover:bg-red-50",children:[e.jsx(vs,{className:"h-4 w-4"}),"Eliminar"]})]})})]})})]},d.id))})]})})]}),e.jsxs($t,{className:"flex justify-between border-t pt-6",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Mostrando ",T.length," de ",u.length," documentos"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",disabled:!0,children:"Anterior"}),e.jsx(M,{variant:"outline",size:"sm",disabled:!0,children:"Siguiente"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(q,{className:"border-0 shadow-md lg:col-span-2",children:[e.jsxs(Te,{children:[e.jsx(Ie,{children:"Actividad reciente"}),e.jsx(De,{children:"Últimas acciones realizadas en documentos"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"space-y-6",children:S.map(d=>e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:`p-2 rounded-full ${d.type==="upload"?"bg-blue-100":d.type==="sign"?"bg-green-100":d.type==="validate"?"bg-purple-100":d.type==="reject"?"bg-red-100":"bg-gray-100"}`,children:[d.type==="upload"&&e.jsx(le,{className:"h-4 w-4 text-blue-600"}),d.type==="sign"&&e.jsx(ct,{className:"h-4 w-4 text-green-600"}),d.type==="validate"&&e.jsx(rt,{className:"h-4 w-4 text-purple-600"}),d.type==="reject"&&e.jsx(ve,{className:"h-4 w-4 text-red-600"}),d.type==="comment"&&e.jsx(J,{className:"h-4 w-4 text-gray-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center",children:[e.jsx("p",{className:"font-medium text-sm",children:d.document}),e.jsx("span",{className:"text-xs text-gray-500",children:ht(new Date(d.date),"d MMM, HH:mm",{locale:gt})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[d.type==="upload"&&`${d.user} subió un nuevo documento`,d.type==="sign"&&`${d.user} firmó el documento`,d.type==="validate"&&`${d.user} validó el documento`,d.type==="reject"&&`${d.user} rechazó el documento`,d.type==="comment"&&`${d.user} comentó en el documento`]})]})]},d.id))}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(M,{variant:"ghost",className:"text-sm gap-2",children:[e.jsx(Es,{className:"h-4 w-4"}),"Ver todo el historial"]})})]})]}),e.jsxs(q,{className:"border-0 shadow-md",children:[e.jsxs(Te,{children:[e.jsx(Ie,{children:"Categorías de documentos"}),e.jsx(De,{children:"Documentos por tipo y categoría"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"space-y-4",children:h.map(d=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${d.id==="legal"?"bg-blue-100":d.id==="comercial"?"bg-green-100":"bg-purple-100"}`,children:e.jsx(J,{className:`h-4 w-4 ${d.id==="legal"?"text-blue-600":d.id==="comercial"?"text-green-600":"text-purple-600"}`})}),e.jsx("span",{className:"font-medium",children:d.name})]}),e.jsx(z,{variant:"outline",children:d.count})]},d.id))}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Tipos de documento"}),e.jsx("div",{className:"space-y-3",children:f.map(d=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d.id==="contrato"&&e.jsx(J,{className:"h-4 w-4 text-blue-500"}),d.id==="certificado"&&e.jsx(at,{className:"h-4 w-4 text-green-500"}),d.id==="formulario"&&e.jsx(J,{className:"h-4 w-4 text-amber-500"}),d.id==="declaracion"&&e.jsx(J,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm capitalize",children:d.name})]}),e.jsx(z,{variant:"outline",children:d.count})]},d.id))})]}),e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsxs(M,{className:"w-full gap-2",children:[e.jsx(ft,{className:"h-4 w-4"}),"Crear nueva categoría"]})})]})]})]})]})]})};export{rr as default};
